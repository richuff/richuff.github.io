<!DOCTYPE html>
<html>
  <head>
     
    <meta charset="UTF-8">
    <title>Android - Richu</title>
    <link rel="shortcut icon" href="/static/img/icon.png">
    <link rel="icon" href="/static/img/icon.png" sizes="192x192"/>
    
<link rel="stylesheet" href="/static/kico.css">
<link rel="stylesheet" href="/static/hingle.css">

    
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <meta name="viewport" content="width=device-width, maximum-scale=1, initial-scale=1"/>
    <meta property="og:site_name" content="Richu">
    <meta property="og:title" content="Android"/>
    
    <style>body:before{ content: ''; background-image: url(https://img.meituan.net/csc/d05518606ba7064dd445508e3cf3d4c42860983.png) }</style>
    
<meta name="generator" content="Hexo 7.3.0"></head>

  <body>
    <header>
    <div class="head-title">
        <h4>Richu</h4>
    </div>
    <div class="head-action">
        <div class="toggle-btn"></div>
        <div class="light-btn"></div>
        <div class="search-btn"></div>
    </div>
    <form class="head-search" method="post">
        <input type="text" name="s" placeholder="搜索什么？">
    </form>
    <nav class="head-menu">
        <a href="/">首页</a>
        <div class="has-child">
            <a>分类</a>
            <div class="sub-menu">
                <a class="category-link" href="/categories/Android/">Android</a><a class="category-link" href="/categories/Go/">Go</a><a class="category-link" href="/categories/Java/">Java</a><a class="category-link" href="/categories/QT/">QT</a><a class="category-link" href="/categories/Unity/">Unity</a><a class="category-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><a class="category-link" href="/categories/%E8%BF%90%E7%BB%B4/">运维</a>
            </div>
        </div>
        
            <a href="/about">关于我</a>
        
    </nav>
</header>

    <main>
    <div class="wrap min">
        <section class="post-title">
            <h2>Android</h2>
            <div class="post-meta">
                <time class="date">2025.01.05</time>
            
                <span class="category"><a class="category-link" href="/categories/Android/">Android</a></span>
            
            </div>
        </section>
        <article class="post-content">
          
            <p>安卓（Android）是一种基于Linux内核（不包含GNU组件）的自由及开放源代码的移动操作系统。主要应用于移动设备，如智能手机和平板电脑，由美国Google公司和开放手机联盟领导及开发。Android操作系统最初由安迪·鲁宾开发，主要支持手机。2005年8月由Google收购注资。2007年11月，Google与84家硬件制造商、软件开发商及电信营运商组建开放手机联盟共同研发改良Android系统。随后Google以Apache开源许可证的授权方式，发布了Android的源代码。</p>
<h2 id="1-Android基本"><a href="#1-Android基本" class="headerlink" title="1.Android基本"></a>1.Android基本</h2><h3 id="1-1-下载Android-Studio和SDK"><a href="#1-1-下载Android-Studio和SDK" class="headerlink" title="1.1.下载Android Studio和SDK"></a>1.1.下载Android Studio和SDK</h3><p><a target="_blank" rel="noopener" href="https://developer.android.google.cn/studio/install">Install Android Studio  | Android Developers (google.cn)</a></p>
<h3 id="1-2-观察APP运行日志"><a href="#1-2-观察APP运行日志" class="headerlink" title="1.2.观察APP运行日志"></a>1.2.观察APP运行日志</h3><p>Log.e表示错误信息</p>
<p>Log.w表示警告信息</p>
<p>Log.i表示一般消息</p>
<p>Log.d表示调试信息</p>
<p>Log.v表示冗余信息</p>
<h3 id="1-3-工程目录结构"><a href="#1-3-工程目录结构" class="headerlink" title="1.3.工程目录结构"></a>1.3.工程目录结构</h3><h4 id="1-3-1-gradle"><a href="#1-3-1-gradle" class="headerlink" title="1.3.1.gradle"></a>1.3.1.gradle</h4><p>.gradle和.idea	Android Studio自动生成的文件，不用了解，一般不要改动。</p>
<p>app	代码、资源等内容（常用）</p>
<p>build	编译文件夹，一般不用</p>
<p>gradle	gradle wrapper的配置文件，Android Studio默认没有启动gradle wrapper的方式，如果需要打开，可以点击Android Studio导航栏 –&gt; File –&gt; Settings –&gt; Build，Execution，Deployment –&gt; Gradle，进行配置更改。</p>
<p>.gitignore	将指定的目录或文件排除在版本控制之外</p>
<p>build.gradle	项目全局的gradle构建脚本，通常这个文件中的内容是不需要修改的</p>
<p>gradle.properties	全局的gradle配置文件，在这里配置的属性将会影响到项目中所有的gradle编译脚本</p>
<p>gradlew和gradlew.bat	在命令行界面中执行gradle命令，其中gradlew是在Linux或Mac系统中使用的，gradlew.bat是在Windows系统中使用的。</p>
<p>HelloWorld.iml	iml文件是所有IntelliJ IDEA项目都会自动生成的一个文件(Android Studio是基于IntelliJ IDEA开发的)，用于标识这是一个IntelliJ IDEA项目，我们不需要修改这个文件中的任何内容</p>
<p>local.properties	指定本机中的Android SDK路径，通常内容都是自动生成的，我们并不需要修改。除非你本机中的Android SDK位置发生了变化，那么就将这个文件中的路径改成新的位置即可。</p>
<p>settings.gradle	用于指定项目中所有引入的模块。需要我们手动去修改这个文件的场景可能比较少</p>
<h4 id="1-3-2-app"><a href="#1-3-2-app" class="headerlink" title="1.3.2.app"></a>1.3.2.app</h4><p>build	编译时自动生成的文件，一般不用</p>
<p>libs	第三方jar包，jar包都放在libs目录下</p>
<p>AndroidTest	用来编写Android Test测试用例的，可以对项目进行一些自动化测试</p>
<p>java	java目录是放置我们所有java代码的地方，展开该目录，你将看到我们刚才创建的HelloWorldActivity文件就在里面</p>
<p>res	所有资源文件都在这里	图片放在drawable目录下	布局放在layout目录下，（相当于html中的body）应用图标在mipmap目录下 字符串放在values目录下</p>
<p>AndroidManifest.xml	整个Android项目的配置文件，你在程序中定义的所以四大组件都需要在这个文件里注册，另外还可以在这个文件中给应用程序添加权限声明。</p>
<p>test  此处是用来编写Unit Test测试用例的，是对项目进行自动化测试的另一种方式。</p>
<p>.gitignore	这个文件用于将app模块内的指定的目录或文件排除在版本控制之外，作用和外层的.gitignore文件类似。</p>
<p>app.iml	IntelliJ IDEA项目自动生成的文件，我们不需要关心或修改这个文件中的内容。</p>
<p>build.gradle	这是app模块的gradle构建脚本，这个文件中会指定很多项目构建相关的配置。</p>
<p>proguard-rules.pro	这个文件用于指定项目代码的混淆规则，当代码开发完成后打成安装包文件，如果不希望代码被别人破解</p>
<h3 id="1-4-创建新的App页面"><a href="#1-4-创建新的App页面" class="headerlink" title="1.4.创建新的App页面"></a>1.4.创建新的App页面</h3><p>1.创建一个layout布局文件</p>
<blockquote>
<p><code>xxx.xml</code></p>
</blockquote>
<p>2.创建一个Activity Java类</p>
<blockquote>
<p>使用startActivity切换页面</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        <span class="type">TextView</span> <span class="variable">tv</span> <span class="operator">=</span> findViewById(R.id.tv1);</span><br><span class="line">        tv.setText(<span class="string">&quot;你好,RICHU&quot;</span>);</span><br><span class="line">        Log.d(<span class="string">&quot;ning&quot;</span>,<span class="string">&quot;create&quot;</span>);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">btn</span> <span class="operator">=</span> findViewById(R.id.button);</span><br><span class="line">        btn.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">                <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();</span><br><span class="line">                intent.setClass(MainActivity.<span class="built_in">this</span>, MainActivity_2.class);</span><br><span class="line">                startActivity(intent);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-Andriod控件"><a href="#2-Andriod控件" class="headerlink" title="2.Andriod控件"></a>2.Andriod控件</h2><h3 id="2-1-设置文本的内容"><a href="#2-1-设置文本的内容" class="headerlink" title="2.1.设置文本的内容"></a>2.1.设置文本的内容</h3><p>1.在XML文件中通过属性andriod:text</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--res/values--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span> <span class="attr">name</span>=<span class="string">&quot;mytext&quot;</span> <span class="attr">translatable</span>=<span class="string">&quot;false&quot;</span>&gt;</span>HAHAHA<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--res/layoutres--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/mytest&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;@string/mytext&quot;</span></span></span><br><span class="line"><span class="tag">              </span></span><br><span class="line"><span class="tag">        <span class="attr">tools:ignore</span>=<span class="string">&quot;MissingConstraints&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.在Java代码中调用文本视图对象的setText方法设置文本</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--res/values--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span> <span class="attr">name</span>=<span class="string">&quot;mytext&quot;</span> <span class="attr">translatable</span>=<span class="string">&quot;false&quot;</span>&gt;</span>HAHAHA<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//java/com/example/application1/MainActivity_2.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity_2</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(<span class="meta">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.test);</span><br><span class="line">        <span class="type">TextView</span> <span class="variable">tv</span> <span class="operator">=</span> findViewById(R.id.tv);</span><br><span class="line">        tv.setText(R.string.mytext);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-设置文本的大小"><a href="#2-2-设置文本的大小" class="headerlink" title="2.2.设置文本的大小"></a>2.2.设置文本的大小</h3><blockquote>
<p>px 像素</p>
<p>dpi  指屏幕每英寸有多少个像素点</p>
<p>dip 长度单位，同一个单位在不同设备上有不同的显示效果，简称dp,与设备无关只与屏幕的尺寸有关</p>
<p>sp 专门用来设置字体大小,在系统中可以设置调整字体大小</p>
</blockquote>
<blockquote>
<p>px &#x3D; dpi*dip&#x2F;160</p>
</blockquote>
<blockquote>
<p>相同尺寸的手机，即使分辨率不同，同dp的组件占用屏幕比例也相同</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//默认使用sp</span></span><br><span class="line">tv.setTextSize(<span class="number">30</span>);</span><br></pre></td></tr></table></figure>

<h3 id="2-3-设置文本颜色"><a href="#2-3-设置文本颜色" class="headerlink" title="2.3.设置文本颜色"></a>2.3.设置文本颜色</h3><blockquote>
<p>使用自带的颜色，在Color类里面选择</p>
<p>tv.setTextColor(Color.BLACK);</p>
<p>使用自定义的颜色类似于argb() 前两位是透明度 ff为不透明,不设置透明度就直接透明了</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tv.setTextColor(<span class="number">0xff00ff00</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在布局文件中设置 后两位是透明度ff为透明</p>
<p>八位编码#FFEEDDCC中，FF表示透明度，EE表示红色的浓度，DD表示 绿色的浓度，CC表示蓝色的浓度。透明度为FF表示完全不透明，为00表示完全透明。</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:text</span>=<span class="string">&quot;@string/mytext&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:textColor</span>=<span class="string">&quot;#8ec5fc&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">tools:ignore</span>=<span class="string">&quot;MissingConstraints&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-设置视图的宽高"><a href="#2-4-设置视图的宽高" class="headerlink" title="2.4.设置视图的宽高"></a>2.4.设置视图的宽高</h3><blockquote>
<p>视图宽高通过属性Android：layout_width表达，视图高度通过属性android:layout_height表达 </p>
<p>match_parent	表示与上级视图保持一致</p>
<p>wrap_content	表示与内容自适应</p>
<p>以dp为单位的具体尺寸</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:textColor</span>=<span class="string">&quot;#000000&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:textSize</span>=<span class="string">&quot;17sp&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:text</span>=<span class="string">&quot;@string/mytext&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:background</span>=<span class="string">&quot;#00ffff&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity_2</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(<span class="meta">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.test);</span><br><span class="line">        <span class="type">TextView</span> <span class="variable">tv</span> <span class="operator">=</span> findViewById(R.id.tv);</span><br><span class="line">        ViewGroup.<span class="type">LayoutParams</span> <span class="variable">params</span> <span class="operator">=</span> tv.getLayoutParams();</span><br><span class="line">        params.width = diptopx.dip(<span class="built_in">this</span>,<span class="number">300</span>);</span><br><span class="line">        tv.setLayoutParams(params);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>工具类将dip转为px</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">diptopx</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">dip</span><span class="params">(Context context, <span class="type">float</span> dip)</span>&#123;</span><br><span class="line">        <span class="comment">//获取当前手机的像素密度</span></span><br><span class="line">        <span class="type">float</span> <span class="variable">scale</span> <span class="operator">=</span> context.getResources().getDisplayMetrics().density;</span><br><span class="line">        <span class="comment">//四舍五入</span></span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>)(dip * scale +<span class="number">0.5f</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-5-设置视图的间距"><a href="#2-5-设置视图的间距" class="headerlink" title="2.5.设置视图的间距"></a>2.5.设置视图的间距</h3><p>margin  当前视图和周围平级视图之间的距离</p>
<p>padding 当前视图与内部下级视图之间的距离</p>
<blockquote>
<p>与前端的margin和padding类似有四个方向,layout_marginTop….</p>
</blockquote>
<h3 id="2-6-设置视图的对齐方式"><a href="#2-6-设置视图的对齐方式" class="headerlink" title="2.6.设置视图的对齐方式"></a>2.6.设置视图的对齐方式</h3><blockquote>
<p>layout_gravity 当前视图相对于上级视图的对齐方式</p>
<p>gravity下级视图相对于当前视图的对齐方式</p>
<p>left right top bottom </p>
<p>用|连接表示合并方向left|top 为左上方</p>
</blockquote>
<h2 id="3-布局"><a href="#3-布局" class="headerlink" title="3.布局"></a>3.布局</h2><h3 id="3-1LinearLayout线性布局"><a href="#3-1LinearLayout线性布局" class="headerlink" title="3.1LinearLayout线性布局"></a>3.1LinearLayout线性布局</h3><blockquote>
<p>orientation</p>
<ul>
<li>horizontal 内部视图在水平方向从左到右排列</li>
<li>vertical 内部视图在水平方向从上到下排列</li>
</ul>
<p>如果不指定orientation属性，则LinearLayout默认水平方向排列</p>
</blockquote>
<blockquote>
<p>线性布局的权重概念，值得是线性布局的下级视图各自拥有多大比例的宽高</p>
<p>权重属性名叫layout_weight.但该属性不在LinearLayout节点设置，而在线性布局的直接下级视图设置，表示该下级视图占据的宽高比例。</p>
<ul>
<li>layout_width&#x3D;0   layout_weight表示水平方向的宽高比例</li>
<li>layout_height&#x3D;0   layout_weight表示垂直方向的宽高比例</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;横排第一个&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;17sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#000000&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;横排第一个&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;17sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#000000&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2RelativeLayout相对布局"><a href="#3-2RelativeLayout相对布局" class="headerlink" title="3.2RelativeLayout相对布局"></a>3.2RelativeLayout相对布局</h3><p>相对布局的下级视图位置由其他视图决定。用于确定下级视图位置的参照物分两种：</p>
<ul>
<li>与该视图自身平级的视图</li>
<li>该视图的上级视图</li>
</ul>
<p>如果不设置下级视图的参照物，那么下级视图默认显示在RelativeLayout内部的左上角</p>
<p>与父容器相关的定位:</p>
<table>
<thead>
<tr>
<th>android:layout_alignParentTop</th>
<th>控件顶部与父布局的顶部对齐。</th>
</tr>
</thead>
<tbody><tr>
<td>android:layout_alignParentBottom</td>
<td>控件底部与父布局的底部对齐。</td>
</tr>
<tr>
<td>android:layout_alignParentLeft</td>
<td>控件左边与父布局的左边对齐。</td>
</tr>
<tr>
<td>android:layout_alignParentRight</td>
<td>控件右边与父布局的右边对齐。</td>
</tr>
<tr>
<td>android:layout_alignParentStart</td>
<td>将控件的起始边（根据布局方向，可能是左边或右边）与父容器的起始边对齐。</td>
</tr>
<tr>
<td>android:layout_alignParentEnd</td>
<td>将控件的结束边（根据布局方向，可能是右边或左边）与父容器的结束边对齐。</td>
</tr>
<tr>
<td>android:layout_centerHorizontal</td>
<td>将控件水平居中对齐。</td>
</tr>
<tr>
<td>android:layout_centerVertical</td>
<td>将控件垂直居中对齐。</td>
</tr>
<tr>
<td>android:layout_centerInParent</td>
<td>水平垂直都居中</td>
</tr>
</tbody></table>
<p>相对定位属性：</p>
<table>
<thead>
<tr>
<th>android:layout_above</th>
<th>控件放置在指定控件的上方。</th>
</tr>
</thead>
<tbody><tr>
<td>android:layout_below</td>
<td>控件放置在指定控件的下方。</td>
</tr>
<tr>
<td>android:layout_toLeftOf</td>
<td>控件放置在指定控件的左边。</td>
</tr>
<tr>
<td>android:layout_toRightOf</td>
<td>控件放置在指定控件的右边。</td>
</tr>
<tr>
<td>android:layout_alignTop</td>
<td>控件的顶部与指定控件的顶部对齐。</td>
</tr>
<tr>
<td>android:layout_alignBottom</td>
<td>控件的底部与指定控件的底部对齐。</td>
</tr>
<tr>
<td>android:layout_alignLeft</td>
<td>控件的左边与指定控件的左边对齐。</td>
</tr>
<tr>
<td>android:layout_alignRight</td>
<td>控件的右边与指定控件的右边对齐。</td>
</tr>
<tr>
<td>android:layout_alignStart</td>
<td>将控件的起始边（根据布局方向，可能是左边或右边）与指定控件的起始边对齐。</td>
</tr>
<tr>
<td>android:layout_alignEnd</td>
<td>将控件的结束边（根据布局方向，可能是右边或左边）与指定控件的结束边对齐。</td>
</tr>
<tr>
<td>android:layout_alignBaseline</td>
<td>控件的基线与指定控件的基线对齐。</td>
</tr>
</tbody></table>
<h3 id="3-3GridLayout网格布局"><a href="#3-3GridLayout网格布局" class="headerlink" title="3.3GridLayout网格布局"></a>3.3GridLayout网格布局</h3><blockquote>
<p>支持多行多列的布局</p>
<p>默认从左往右从上到下</p>
<ul>
<li>columnCount属性，指定了网格的列数</li>
<li>rowCount属性，指定了网格的行数</li>
</ul>
</blockquote>
<blockquote>
<p>设置视图的对齐方式</p>
<ul>
<li>采用layout_gravity属性，它指定了当前视图相对于上级视图的对齐方式</li>
<li>采用gravity属性，它指定了下级视图相对于当前视图的对齐方式</li>
</ul>
</blockquote>
<blockquote>
<p>layout_gravity和gravity取值为left,top,right,bottom ,center</p>
<p>left|top为左上</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">GridLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:layout_columnWeight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:layout_rowWeight</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>设置权重layout_columnWeight,layout_rowWeight</p>
</blockquote>
<h3 id="3-4滚动视图ScrollView"><a href="#3-4滚动视图ScrollView" class="headerlink" title="3.4滚动视图ScrollView"></a>3.4滚动视图ScrollView</h3><blockquote>
<p>ScrollView,它是垂直方向的滚动视图；垂直方向滚动时，layout_width属性值设置为match_parent,layout_height属性值设置为wrap_content</p>
<p>HorizontalScrollView,它是水平方向的滚动视图水平方向滚动时，layout_width属性值设置为wrap_content,layout_height属性设置为match_parent</p>
</blockquote>
<h3 id="3-5-Button"><a href="#3-5-Button" class="headerlink" title="3.5.Button"></a>3.5.Button</h3><blockquote>
<p>由TextView派生</p>
<ul>
<li>有默认背景</li>
<li>文本居中对齐</li>
</ul>
</blockquote>
<blockquote>
<p>相对于TextView新增的属性</p>
<p>android:textAllCaps&#x3D;”true”</p>
<ul>
<li>true将小写转为大写</li>
<li>false则不会转换</li>
</ul>
<p>android:onClick&#x3D;”doclick”</p>
<p>绑定事件（不常用）</p>
</blockquote>
<h3 id="3-6点击事件"><a href="#3-6点击事件" class="headerlink" title="3.6点击事件"></a>3.6点击事件</h3><blockquote>
<p>setOnClickListener</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity_2</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(<span class="meta">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.test);</span><br><span class="line"></span><br><span class="line">        <span class="type">TextView</span> <span class="variable">tv</span> <span class="operator">=</span> findViewById(R.id.tv);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">bt</span> <span class="operator">=</span> findViewById(R.id.bt);</span><br><span class="line">        bt.setOnClickListener(<span class="keyword">new</span> <span class="title class_">MyOnclickListener</span>(tv));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyOnclickListener</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> TextView tv;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">MyOnclickListener</span><span class="params">(TextView tv)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.tv = tv;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> String.format(<span class="string">&quot;%s点击%s&quot;</span>, SimpleUtil.dateformat(),((Button)v));</span><br><span class="line">            tv.setText(s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>创建公用OnClickListener</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity_2</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener&#123;</span><br><span class="line">	<span class="meta">@override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Onclick</span><span class="params">(View v)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (v.getId()==R.id.bt)&#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-7长按点击事件"><a href="#3-7长按点击事件" class="headerlink" title="3.7长按点击事件"></a>3.7长按点击事件</h3><blockquote>
<p>true则为开启事件冒泡，false则不开启</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bt.setOnLongClickListener(v-&gt;&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> String.format(<span class="string">&quot;%s点击%s&quot;</span>, SimpleUtil.dateformat(),((Button)v));</span><br><span class="line">    tv.setText(s);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="3-8禁用恢复按钮"><a href="#3-8禁用恢复按钮" class="headerlink" title="3.8禁用恢复按钮"></a>3.8禁用恢复按钮</h3><blockquote>
<p>是否允许点击enable</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bt1.setEnabled(<span class="literal">true</span>);</span><br><span class="line">bt1.setEnabled(<span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>true启用，false禁用</p>
</blockquote>
<h3 id="3-9ImageView"><a href="#3-9ImageView" class="headerlink" title="3.9ImageView"></a>3.9ImageView</h3><blockquote>
<p>图像视图ImageView</p>
<p>图像视图展示的图片通常位于res&#x2F;drawable***目录，设置图像视图的显示图片有两种方式:</p>
<p>在XML文件中，通过属性android：src设置图片资源，属性值格式形如“@drawable&#x2F;不含扩展名的图片名称”。</p>
<p>在Java代码中，调用setlmageResource方法设置图片资源，方法参数格式形如“R.drawable.不含扩展名的图片名称”。</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;200dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:src</span>=<span class="string">&quot;@drawable/test&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>scaleType属性</p>
</blockquote>
<p>matrix：使用matrix方式进行缩放。</p>
<p>fitXY：横向、纵向独立缩放，以适应该ImageView。</p>
<p>fitStart:保持纵横比缩放图片，并且将图片放在ImageView的左上角。</p>
<p>fitCenter：保持纵横比缩放图片，缩放完成后将图片放在ImageView的中央。</p>
<p>fitEnd：保持纵横比缩放图片，缩放完成后将图片放在ImageView的右下角。</p>
<p>center：把图片放在ImageView的中央，但是不进行任何缩放。</p>
<p>centerCrop：保持纵横比缩放图片，以使图片能完全覆盖ImageView。</p>
<p>centerInside：保持纵横比缩放图片，以使得ImageView能完全显示该图片。（用于缩小图片）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ImageView</span> <span class="variable">imageView</span> <span class="operator">=</span> findViewById(R.id.image);</span><br><span class="line"><span class="comment">//设置图片源</span></span><br><span class="line">imageView.setImageResource(R.drawable.test);</span><br><span class="line"><span class="comment">//设置缩放对齐方式</span></span><br><span class="line">imageView.setScaleType(ImageView.ScaleType.FIT_XY);</span><br></pre></td></tr></table></figure>

<h3 id="3-10ImageButton"><a href="#3-10ImageButton" class="headerlink" title="3.10ImageButton"></a>3.10ImageButton</h3><blockquote>
<p>同时显示文本和图像</p>
<p>通过Button上的drawable属性设置周围文本的图标</p>
</blockquote>
<blockquote>
<p>drawableTop:指定文字上方的图片</p>
<p>drawableBottom:指定文字下方的图片</p>
<p>drawableLeft:指定文字左方的图片</p>
<p>drawableRight:指定文字右方的图片</p>
<p>drawablePadding:指定图片与文字的间距</p>
</blockquote>
<h3 id="3-11计算器项目"><a href="#3-11计算器项目" class="headerlink" title="3.11计算器项目"></a>3.11计算器项目</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CaculateActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TextView tv_result;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">firstNum</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> String operator=<span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">secondNum</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">showText</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_caculate);</span><br><span class="line">        <span class="comment">//获取结果文本视图</span></span><br><span class="line">        tv_result = findViewById(R.id.tv_result);</span><br><span class="line">        <span class="comment">//给每个按钮绑定事件</span></span><br><span class="line">        findViewById(R.id.btn_cancel).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.btn_div).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.btn_mul).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.btn_clear).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.btn_seven).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.btn_eight).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.btn_nine).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.btn_plus).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.btn_four).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.btn_five).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.btn_six).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.btn_mius).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.btn_one).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.btn_two).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.btn_three).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.btn_sqrt).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.btn_divone).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.btn_zero).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.btn_point).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.btn_equal).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        String inputtext;</span><br><span class="line">        <span class="keyword">if</span> (v.getId() == R.id.btn_sqrt)&#123;</span><br><span class="line">            inputtext = <span class="string">&quot;√&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            inputtext = ((TextView) v).getText().toString();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (v.getId() == R.id.btn_clear) &#123;</span><br><span class="line">            clear();</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(v.getId() == R.id.btn_cancel) &#123;</span><br><span class="line">            cancel();</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(v.getId() == R.id.btn_plus) &#123;</span><br><span class="line">            operator = inputtext;</span><br><span class="line">            refreshText(showText+inputtext);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (v.getId() == R.id.btn_mius) &#123;</span><br><span class="line">            operator = inputtext;</span><br><span class="line">            refreshText(showText+inputtext);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (v.getId() == R.id.btn_mul) &#123;</span><br><span class="line">            operator = inputtext;</span><br><span class="line">            refreshText(showText+inputtext);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (v.getId() == R.id.btn_div) &#123;</span><br><span class="line">            operator = inputtext;</span><br><span class="line">            refreshText(showText+inputtext);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (v.getId() == R.id.btn_equal) &#123;</span><br><span class="line">            <span class="type">double</span> <span class="variable">caculate_result</span> <span class="operator">=</span> Caculate();</span><br><span class="line">            refreshOpreator(String.valueOf(caculate_result));</span><br><span class="line">            refreshText(showText+<span class="string">&quot;=&quot;</span>+caculate_result);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (v.getId() == R.id.btn_sqrt) &#123;</span><br><span class="line">            <span class="type">double</span> <span class="variable">sqrt_result</span> <span class="operator">=</span> Math.sqrt(Double.parseDouble(firstNum));</span><br><span class="line">            refreshOpreator(String.valueOf(sqrt_result));</span><br><span class="line">            refreshText(showText + <span class="string">&quot;^=&quot;</span> + sqrt_result);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (v.getId()==R.id.btn_divone) &#123;</span><br><span class="line">            <span class="type">double</span> <span class="variable">sqrt_result</span> <span class="operator">=</span> <span class="number">1</span>/Double.parseDouble(firstNum);</span><br><span class="line">            refreshOpreator(String.valueOf(sqrt_result));</span><br><span class="line">            refreshText(showText + <span class="string">&quot;/=&quot;</span> + sqrt_result);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (!result.isEmpty())&#123;</span><br><span class="line">                clear();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (operator.isEmpty()) &#123;</span><br><span class="line">                firstNum = firstNum + inputtext;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                secondNum = secondNum + inputtext;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//整数不需要前面的0</span></span><br><span class="line">            <span class="keyword">if</span> (showText.equals(<span class="string">&quot;0&quot;</span>) &amp;&amp; !inputtext.equals(<span class="string">&quot;.&quot;</span>)) &#123;</span><br><span class="line">                refreshText(inputtext);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                refreshText(showText + inputtext);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">cancel</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (showText.length()&gt;<span class="number">1</span>)&#123;</span><br><span class="line">            refreshText(showText.substring(<span class="number">0</span>,showText.length()-<span class="number">1</span>));</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            refreshText(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">refreshText</span><span class="params">(String text)</span>&#123;</span><br><span class="line">        showText = text;</span><br><span class="line">        tv_result.setText(showText);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span> &#123;</span><br><span class="line">        refreshOpreator(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        refreshText(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">refreshOpreator</span><span class="params">(String newresult)</span>&#123;</span><br><span class="line">        result = newresult;</span><br><span class="line">        firstNum = result;</span><br><span class="line">        secondNum = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        operator = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> <span class="title function_">Caculate</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (operator)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;+&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> Double.parseDouble(firstNum) + Double.parseDouble(secondNum);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;-&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> Double.parseDouble(firstNum) - Double.parseDouble(secondNum);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;X&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> Double.parseDouble(firstNum) * Double.parseDouble(secondNum);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;÷&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> Double.parseDouble(firstNum) / Double.parseDouble(secondNum);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-Activity"><a href="#4-Activity" class="headerlink" title="4.Activity"></a>4.Activity</h2><h3 id="4-1启停activity"><a href="#4-1启停activity" class="headerlink" title="4.1启停activity"></a>4.1启停activity</h3><blockquote>
<p>启动新Activity</p>
<p>startActivity(new Intent(原页面.this,目标页面.class))</p>
<p>返回</p>
<p>finnish()&#x2F;&#x2F;结束当前的活动页面</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressLint(&quot;MissingInflatedId&quot;)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        findViewById(R.id.btn).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        startActivity(<span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>,MainActivity2.class));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity2</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressLint(&quot;MissingInflatedId&quot;)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main2);</span><br><span class="line">        findViewById(R.id.btn1).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (v.getId() == R.id.btn1)&#123;</span><br><span class="line">            finish();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-2Activity生命周期"><a href="#4-2Activity生命周期" class="headerlink" title="4.2Activity生命周期"></a>4.2Activity生命周期</h3><p>onCreate：表示Activity正在被创建。生命周期的第一个方法，当打开一个activity时首先回调这个方法。在这个方法中一般做一些初始化工作，例如加载界面布局资源（setContentView）、数据初始化（findviewbyid）</p>
<p>onRestart ： 表示Activity正在被重新启动。当前activity从不可见变为可见状态时这个方法就会回调。一般是用户行为导致，比如用户摁home键回到桌面，当用户再次回到本activity时，当前activity 走 onRestart-&gt;onStart-&gt;onResume</p>
<p>onStart :表示activity正在被启动。activity可见，未出现在前台。可以理解为activity已经显示出来了，但是我们看不到，不能与之交互。</p>
<p>onResume ：表示activity已经可见，并且出现在前台，可以与用户进行交互。例如activity上有Button，此时我们就可以进行点击了。</p>
<p>onPause：表示activity正在停止,接着很快执行onStop。注意极端情况下，本Activity跳转其他activity后快速的回到当前activity时，当前activity的生命周期：onPause-&gt;onResume<br>但是这个“快速回到”要很快，一般情况下都是onPause-&gt;onStop-&gt;onRestart-&gt;onStart-&gt;onResume。这里不能做太耗时操作，可以做一些数据存储，动画停止工作。</p>
<p>onStop：表示activity即将停止，可以做一些回收工作。但是不能太耗时。</p>
<p>onDestroy ：activity即将被销毁 ，activity生命周期最后一个回调，这里可以做一些回收工作，资源释放。</p>
<p>onNewIntent:重用已有的活动实例</p>
<p><img src="http://kycloud3.koyoo.cn/202410236eeb0202410231827142116.png" alt="activity.png"></p>
<h3 id="4-3Activity启动模式"><a href="#4-3Activity启动模式" class="headerlink" title="4.3Activity启动模式"></a>4.3Activity启动模式</h3><h4 id="1-在配置文件中设置启动模式"><a href="#1-在配置文件中设置启动模式" class="headerlink" title="1.在配置文件中设置启动模式"></a>1.在配置文件中设置启动模式</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:name</span>=<span class="string">&quot;.MainActivity&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:exported</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:launchMode</span>=<span class="string">&quot;standard&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>standard</p>
<p>默认启动模式</p>
<p>启动Activity的会依照顺序依次被压入Task栈内</p>
</blockquote>
<blockquote>
<p>singleTop</p>
<p>如果栈顶为新建的Activity（目标Activity）,那么就不会重复创建新的Activity</p>
<p>适合开启渠道多，多应用开启调用的Activity，通过这种设置可以避免创建过的Activity被重复创建，多数通过动态设置使用</p>
</blockquote>
<blockquote>
<p>singleTask</p>
<p>栈内复用</p>
<p>程序的主界面,耗费系统资源的Activity</p>
</blockquote>
<blockquote>
<p>全局唯一模式</p>
<p>singleInstance</p>
<p>单独为它创建一个任务栈，新的Task只会有它一个实例。如果已经创建过，则不会创建新的Activity，而是将之前的Activity唤醒</p>
</blockquote>
<h4 id="2-在代码中动态设置"><a href="#2-在代码中动态设置" class="headerlink" title="2.在代码中动态设置"></a>2.在代码中动态设置</h4><blockquote>
<p>启动标志的取值说明如下：<br>Intent.FLAG_ACTIVITY_NEW_TASK：开辟一个新的任务栈<br>Intent.FLAG_ACTIVITY_SINGLE_TOP：当栈顶为待跳转的活动实例之时，则重用栈顶的实例<br>Intent.FLAG_ACTIVITY_CLEAR_TOP：当栈中存在待跳转的活动实例时，则重新创建一个新实例，并清除原实例上方的所有实例<br>Intent.FLAG_ACTIVITY_NO_HISTORY：栈中不保存新启动的活动实例<br>Intent.FLAG_ACTIVITY_CLEAR_TASK：跳转到新页面时，栈中的原有实例都被清空</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">    <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>,MainActivity2.class);</span><br><span class="line">    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);</span><br><span class="line">    startActivity(intent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>登录后不再返回登录界面</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>,MainActivity2.class);</span><br><span class="line">intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class="line">startActivity(intent);</span><br></pre></td></tr></table></figure>

<h3 id="4-4传递数据"><a href="#4-4传递数据" class="headerlink" title="4.4传递数据"></a>4.4传递数据</h3><h4 id="4-4-1显示Intent和隐式Intent"><a href="#4-4-1显示Intent和隐式Intent" class="headerlink" title="4.4.1显示Intent和隐式Intent"></a>4.4.1显示Intent和隐式Intent</h4><blockquote>
<p>Intent是各个组件之间信息沟通的桥梁，用于各组件的通信</p>
</blockquote>
<blockquote>
<p>显示Intent，直接指定来源活动和目标活动，属于精确匹配</p>
<ul>
<li>在Intent的构造函数中指定</li>
<li>调用意图对象的SetClass方法指定</li>
<li>调用意图对象的SetComponent方法指定</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一种</span></span><br><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>,MainActivity2.class);</span><br><span class="line"><span class="comment">//第二种，调用意图对象的setClass方法指定</span></span><br><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();</span><br><span class="line">intent.setClass(<span class="built_in">this</span>, MainActivity2.class);</span><br><span class="line"><span class="comment">//第三种，调用意图对象的SetComponet方法指定</span></span><br><span class="line"><span class="type">ComponentName</span> <span class="variable">componentName</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ComponentName</span>(<span class="built_in">this</span>, MainActivity2.class);</span><br><span class="line">intent.setComponent(componentName);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>隐式Intent，没有明确指定要跳转的目标活动，只要给出一个动作字符串让系统自动匹配，属于模糊匹配</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">phoneNumber</span> <span class="operator">=</span><span class="string">&quot;1234&quot;</span>;</span><br><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();</span><br><span class="line"><span class="comment">//设置意图动作</span></span><br><span class="line">intent.setAction(Intent.ACTION_DIAL);</span><br><span class="line"><span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;tel:&quot;</span>+phoneNumber);</span><br><span class="line">intent.setData(uri);</span><br><span class="line">startActivity(intent);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>启动自定义的程序</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();</span><br><span class="line">intent.setAction(<span class="string">&quot;android.intent.action.RICHU&quot;</span>);</span><br><span class="line">intent.addCategory(Intent.CATEGORY_DEFAULT);</span><br><span class="line">startActivity(intent);</span><br></pre></td></tr></table></figure>

<p><code>在要启动的程序中配置</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.RICHU&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.DEFAULT&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>常见系统动作的取值说明</p>
</blockquote>
<table>
<thead>
<tr>
<th>intent 类的系统动作常量名</th>
<th>系统动作的常量值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>ACTION_MAIN</td>
<td>android.intent.action.MAIN</td>
<td>App启动时的入口</td>
</tr>
<tr>
<td>ACTION_VIEW</td>
<td>android.intent.action.VIEW</td>
<td>向用户显示数据</td>
</tr>
<tr>
<td>ACTION_SEND</td>
<td>android.intent.action.SEND</td>
<td>分享内容</td>
</tr>
<tr>
<td>ACTION_CALL</td>
<td>android.intent.action.CALL</td>
<td>直接拨号</td>
</tr>
<tr>
<td>ACITON_DIAL</td>
<td>android.intent.action.DIAL</td>
<td>准备拨号</td>
</tr>
<tr>
<td>ACTION_SENDTO</td>
<td>android.intent.action.SENDTO</td>
<td>发送短信</td>
</tr>
<tr>
<td>ACTION_ANSWER</td>
<td>android.intent.action.ANSWER</td>
<td>接听电话</td>
</tr>
</tbody></table>
<h4 id="4-4-2向下一个Activity发送数据"><a href="#4-4-2向下一个Activity发送数据" class="headerlink" title="4.4.2向下一个Activity发送数据"></a>4.4.2向下一个Activity发送数据</h4><blockquote>
<p>使用Bundle对象存储待传递的数据信息</p>
</blockquote>
<blockquote>
<p>发送</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>, MainActivity2.class);</span><br><span class="line"><span class="comment">//创建一个新包裹</span></span><br><span class="line"><span class="type">Bundle</span> <span class="variable">bundle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bundle</span>();</span><br><span class="line"><span class="type">Button</span> <span class="variable">send</span> <span class="operator">=</span> findViewById(R.id.btn);</span><br><span class="line">bundle.putString(<span class="string">&quot;request_time&quot;</span>, MyDate.gettime());</span><br><span class="line">bundle.putString(<span class="string">&quot;request_content&quot;</span>,send.getText().toString());</span><br><span class="line">intent.putExtras(bundle);</span><br><span class="line">startActivity(intent);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>接收</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">TextView</span>  <span class="variable">show</span> <span class="operator">=</span> findViewById(R.id.show);</span><br><span class="line"><span class="type">Bundle</span> <span class="variable">bundle</span> <span class="operator">=</span> getIntent().getExtras();</span><br><span class="line"><span class="type">String</span> <span class="variable">request_time</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;request_time&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">request_content</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;request_content&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">test</span> <span class="operator">=</span> String.format(<span class="string">&quot;hahah\nha%s\n%s&quot;</span>,request_time,request_content);</span><br><span class="line">show.setText(test);</span><br></pre></td></tr></table></figure>

<h4 id="4-4-3向上一个Activity返回数据"><a href="#4-4-3向上一个Activity返回数据" class="headerlink" title="4.4.3向上一个Activity返回数据"></a>4.4.3向上一个Activity返回数据</h4><blockquote>
<p>1.上一个页面打包好请求数据后，调用StartActivityForResult方法执行跳转动作</p>
<p>2.下一个页面接收并解析请求数据，进行相应处理</p>
<p>3.下一个页面返回上一个页面时，打包应答数据并调用SetResult方法返回数据包裹</p>
<p>4.上一个页面重写方法OnActivityResult，解析获得下一个页面的返回数据</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity3</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">myrequest</span> <span class="operator">=</span> <span class="string">&quot;this is a test&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> String getrequest;</span><br><span class="line">    <span class="keyword">private</span> ActivityResultLauncher&lt;Intent&gt; register;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressLint(&quot;MissingInflatedId&quot;)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main3);</span><br><span class="line"></span><br><span class="line">        <span class="type">TextView</span> <span class="variable">begin</span> <span class="operator">=</span> findViewById(R.id.begin);</span><br><span class="line">        begin.setText(myrequest);</span><br><span class="line"></span><br><span class="line">        findViewById(R.id.mybtn).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">        register = registerForActivityResult(<span class="keyword">new</span> <span class="title class_">ActivityResultContracts</span>.StartActivityForResult(), o -&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (o != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> o.getData();</span><br><span class="line">                <span class="keyword">if</span> (intent != <span class="literal">null</span> &amp;&amp; o.getResultCode() == Activity.RESULT_OK)&#123;</span><br><span class="line">                    <span class="type">Bundle</span> <span class="variable">bundle</span> <span class="operator">=</span> intent.getExtras();</span><br><span class="line">                    <span class="type">String</span> <span class="variable">request_time</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;response&quot;</span>);</span><br><span class="line">                    <span class="type">String</span> <span class="variable">request_content</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;content&quot;</span>);</span><br><span class="line">                    getrequest = String.format(<span class="string">&quot;hahah\n回复%s\n%s&quot;</span>,request_time,request_content);</span><br><span class="line">                    <span class="type">TextView</span> <span class="variable">end</span> <span class="operator">=</span> findViewById(R.id.end);</span><br><span class="line">                    end.setText(getrequest);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>, MainActivity4.class);</span><br><span class="line">        <span class="type">Bundle</span> <span class="variable">bundle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bundle</span>();</span><br><span class="line">        bundle.putString(<span class="string">&quot;request_time&quot;</span>, MyDate.gettime());</span><br><span class="line">        bundle.putString(<span class="string">&quot;request_content&quot;</span>,myrequest);</span><br><span class="line">        intent.putExtras(bundle);</span><br><span class="line"></span><br><span class="line">        register.launch(intent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity4</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressLint(&quot;MissingInflatedId&quot;)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main4);</span><br><span class="line"></span><br><span class="line">        <span class="type">TextView</span> <span class="variable">get</span> <span class="operator">=</span> findViewById(R.id.get);</span><br><span class="line">        <span class="type">Bundle</span> <span class="variable">bundle</span> <span class="operator">=</span> getIntent().getExtras();</span><br><span class="line">        <span class="type">String</span> <span class="variable">request_time</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;request_time&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">request_content</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;request_content&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">test</span> <span class="operator">=</span> String.format(<span class="string">&quot;hahah\n接收%s\n%s&quot;</span>,request_time,request_content);</span><br><span class="line">        get.setText(test);</span><br><span class="line">        findViewById(R.id.set).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();</span><br><span class="line">        <span class="type">Bundle</span> <span class="variable">bundle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bundle</span>();</span><br><span class="line">        bundle.putString(<span class="string">&quot;response&quot;</span>, MyDate.gettime());</span><br><span class="line">        <span class="comment">//待返回的数据</span></span><br><span class="line">        bundle.putString(<span class="string">&quot;content&quot;</span>,<span class="string">&quot;chli&quot;</span>);</span><br><span class="line">        intent.putExtras(bundle);</span><br><span class="line">        setResult(Activity.RESULT_OK,intent);</span><br><span class="line">        finish();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-4-4利用资源配置文件配置字符串"><a href="#4-4-4利用资源配置文件配置字符串" class="headerlink" title="4.4.4利用资源配置文件配置字符串"></a>4.4.4利用资源配置文件配置字符串</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">test</span> <span class="operator">=</span> getString(R.string.test);</span><br></pre></td></tr></table></figure>

<h4 id="4-4-5利用元数据传递配置信息"><a href="#4-4-5利用元数据传递配置信息" class="headerlink" title="4.4.5利用元数据传递配置信息"></a>4.4.5利用元数据传递配置信息</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;test&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">meta-data</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="5-Drawable"><a href="#5-Drawable" class="headerlink" title="5.Drawable"></a>5.Drawable</h2><blockquote>
<p>drawable-ldpi存放低分辨率的图片，基本没有这样的手机了</p>
<p>drawable-mdpi存放中等分辨率的图片，使用较少</p>
<p>drawable-hdpi存放高分辨率的图片 4-5英寸</p>
<p>drawable-xhdpi存放高分辨率的图片 5-5.5英寸</p>
<p>drawable-xxhdpi存放高分辨率的图片 6-6.5英寸</p>
<p>drawable-xxxhdpi存放高分辨率的图片   &gt;7英寸</p>
</blockquote>
<h3 id="5-1形状图形"><a href="#5-1形状图形" class="headerlink" title="5.1形状图形"></a>5.1形状图形</h3><blockquote>
<p>Shape图形又称形状图形，它用来描述常见的几何形状，包括矩形，圆角矩形，圆形，椭圆等等</p>
</blockquote>
<blockquote>
<p>rectangle矩形</p>
<p>oval椭圆</p>
<p>line直线</p>
<p>ring圆环</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:shape</span>=<span class="string">&quot;oval&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;#66ffaa&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">stroke</span> <span class="attr">android:width</span>=<span class="string">&quot;1dp&quot;</span> <span class="attr">android:color</span>=<span class="string">&quot;#66ffaa&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity6</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> View v_content;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main6);</span><br><span class="line">        v_content = findViewById(R.id.content);</span><br><span class="line">        findViewById(R.id.rectangle).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.oval).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        v_content.setBackgroundResource(R.drawable.react_drawable);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (v.getId() == R.id.rectangle)&#123;</span><br><span class="line">            v_content.setBackgroundResource(R.drawable.react_drawable);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(v.getId() == R.id.oval)&#123;</span><br><span class="line">            v_content.setBackgroundResource(R.drawable.react1_drawable);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>size(尺寸)</p>
<p>size时shape的下级节点，描述形状图形的宽高尺寸，若无size，则与宿主图形一样（View）</p>
<ul>
<li>height</li>
<li>width</li>
</ul>
</blockquote>
<blockquote>
<p>stroke(描边)</p>
<ul>
<li>color颜色</li>
<li>dashGap像素；类型    </li>
<li>dashWidth虚线的宽度</li>
<li>width厚度</li>
</ul>
<p>dashWidth和dashGap为0为实线</p>
</blockquote>
<blockquote>
<p>solid填充</p>
<p>color：颜色</p>
</blockquote>
<blockquote>
<p>padding</p>
<p>上下左右</p>
</blockquote>
<blockquote>
<p>gradient渐变</p>
<ul>
<li>angle 整形渐变的起始角度</li>
<li>type 渐变的类型</li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>linear</td>
<td>线性渐变</td>
</tr>
<tr>
<td>radial</td>
<td>放射渐变</td>
</tr>
<tr>
<td>sweep</td>
<td>滚动渐变</td>
</tr>
</tbody></table>
<h3 id="5-2九宫格图片"><a href="#5-2九宫格图片" class="headerlink" title="5.2九宫格图片"></a>5.2九宫格图片</h3><blockquote>
<p>test.9.png</p>
</blockquote>
<blockquote>
<p>上下左右边缘线</p>
<p>黑线区域以内的图像会拉伸，黑线以外的图像保持原状</p>
<p>内部文字只能放在黑线区域内</p>
</blockquote>
<h3 id="5-3状态列表图形"><a href="#5-3状态列表图形" class="headerlink" title="5.3状态列表图形"></a>5.3状态列表图形</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">&quot;@drawable/test&quot;</span> <span class="attr">android:state_pressed</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">&quot;@drawable/tests&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>state</p>
</blockquote>
<table>
<thead>
<tr>
<th>状态类型的属性名称</th>
<th>说明</th>
<th>适用的组件</th>
</tr>
</thead>
<tbody><tr>
<td>state_pressed</td>
<td>是否按下</td>
<td>按钮Button</td>
</tr>
<tr>
<td>state_checked</td>
<td>是否勾选</td>
<td>复选框CheckBox、单选按钮RadioButton</td>
</tr>
<tr>
<td>state_focused</td>
<td>是否获取焦点</td>
<td>文本编辑EditText</td>
</tr>
<tr>
<td>state_selected</td>
<td>是否选中</td>
<td>各组件通用</td>
</tr>
</tbody></table>
<h3 id="5-4复选框CheckBOx"><a href="#5-4复选框CheckBOx" class="headerlink" title="5.4复选框CheckBOx"></a>5.4复选框CheckBOx</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;系统checkbox&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>checked属性</p>
<p>设置是否选择，可以设置默认选择</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity7</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">CompoundButton</span>.OnCheckedChangeListener &#123;</span><br><span class="line">    <span class="meta">@SuppressLint(&quot;MissingInflatedId&quot;)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main7);</span><br><span class="line">         <span class="type">CheckBox</span> <span class="variable">cb</span> <span class="operator">=</span> findViewById(R.id.select);</span><br><span class="line">         cb.setOnCheckedChangeListener(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//CompoundButton</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCheckedChanged</span><span class="params">(CompoundButton buttonView, <span class="type">boolean</span> isChecked)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">desc</span> <span class="operator">=</span> String.format(<span class="string">&quot;您%s这个Checkbox&quot;</span>,isChecked?<span class="string">&quot;勾选&quot;</span>:<span class="string">&quot;取消&quot;</span>);</span><br><span class="line">        buttonView.setText(desc);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>视图—》文本视图 —》按钮  —》复合按钮  &#x3D;&#x3D;&#x3D;》复选框、单选按钮、开关按钮</p>
</blockquote>
<blockquote>
<p>XML中CompoundButton</p>
<ul>
<li>checked；指定按钮的勾选状态</li>
<li>button：指定左侧勾选图标的图像资源</li>
</ul>
<p>Java代码中CompoundButton</p>
<ul>
<li>setChecked设置按钮的勾选状态</li>
<li>setButtonDrawable设置左侧勾选图标的图像资源</li>
<li>setOnCheckedChangeListener设置勾选状态变化的监听器</li>
<li>isChecked判断按钮是否勾选</li>
</ul>
</blockquote>
<h3 id="5-5Switch"><a href="#5-5Switch" class="headerlink" title="5.5Switch"></a>5.5Switch</h3><p>Switch是开关按钮，它在选中和取消选中时可展现的界面元素比复选框丰富</p>
<blockquote>
<p>textOn:打开时的文本</p>
<p>textOff:设置左侧关闭的文本</p>
<p>track：设置开关轨道的背景</p>
<p>thumb：设置开关表示的图标</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Switch</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/select&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;start|center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;switch&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用checkBox实现Switch开关按钮 --&gt;</span>   </span><br><span class="line"><span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:id</span>=<span class="string">&quot;@+id/select&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:layout_gravity</span>=<span class="string">&quot;start|center&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:text</span>=<span class="string">&quot;switch&quot;</span></span></span><br><span class="line"><span class="tag">          //<span class="attr">设置按钮为空</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:button</span>=<span class="string">&quot;@null&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:background</span>=<span class="string">&quot;@drawable/ic_launcher_background&quot;</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-6单选按钮"><a href="#5-6单选按钮" class="headerlink" title="5.6单选按钮"></a>5.6单选按钮</h3><blockquote>
<p>一组中只能选择一个</p>
<p>RadioButton,放入一个RadioGroup组内部</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:text</span>=<span class="string">&quot;提示信息&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RadioGroup</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">android:id</span>=<span class="string">&quot;@+id/male&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">android:text</span>=<span class="string">&quot;man&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">android:id</span>=<span class="string">&quot;@+id/female&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">android:text</span>=<span class="string">&quot;woman&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">RadioGroup</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>监听单选按钮</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">RadioGroup</span>.OnCheckedChangeListener &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TextView tv;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        <span class="type">RadioGroup</span> <span class="variable">radioGroup</span> <span class="operator">=</span> findViewById(R.id.gender);</span><br><span class="line">        tv = findViewById(R.id.show);</span><br><span class="line">        radioGroup.setOnCheckedChangeListener(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCheckedChanged</span><span class="params">(RadioGroup group, <span class="type">int</span> checkedId)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (checkedId == R.id.male)&#123;</span><br><span class="line">            tv.setText(<span class="string">&quot;male&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (checkedId == R.id.female)&#123;</span><br><span class="line">            tv.setText(<span class="string">&quot;female&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-7文本输入框"><a href="#5-7文本输入框" class="headerlink" title="5.7文本输入框"></a>5.7文本输入框</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:text</span>=<span class="string">&quot;输入登录信息&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>去掉默认边框</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:layout_height</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:text</span>=<span class="string">&quot;输入密码信息&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:background</span>=<span class="string">&quot;@null&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:hint</span>=<span class="string">&quot;自定义&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:inputType</span>=<span class="string">&quot;text&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>inputType:指定输入的文本类型</p>
<p>允许输入的最大长度</p>
<p>hint：指定提示文本的内容</p>
<p>textColorHint指示文本的颜色</p>
</blockquote>
<table>
<thead>
<tr>
<th>输入类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>text</td>
<td>文本</td>
</tr>
<tr>
<td>textPassword</td>
<td>文本密码</td>
</tr>
<tr>
<td>number</td>
<td>整数型</td>
</tr>
<tr>
<td>numberSigned</td>
<td>带符号的数字</td>
</tr>
<tr>
<td>numberDecimal</td>
<td>带小数点的数字</td>
</tr>
<tr>
<td>numberpassword</td>
<td>数字密码</td>
</tr>
<tr>
<td>datetime</td>
<td>时间日期格式</td>
</tr>
<tr>
<td>date</td>
<td>日期格式</td>
</tr>
<tr>
<td>time</td>
<td>事件格式</td>
</tr>
</tbody></table>
<h3 id="5-8焦点变更监听器"><a href="#5-8焦点变更监听器" class="headerlink" title="5.8焦点变更监听器"></a>5.8焦点变更监听器</h3><blockquote>
<p>Toast.makeText(this,”请输入8位密码”,Toast.LENGTH_SHORT).show();</p>
<p>&#x2F;&#x2F;弹出提示</p>
<p>LENGTH_SHORT</p>
<p>LENGTH_LONG   持续时间更长</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity2</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnFocusChangeListener &#123;</span><br><span class="line">    <span class="keyword">private</span> EditText et_message;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main2);</span><br><span class="line">        et_message = findViewById(R.id.message);</span><br><span class="line">        <span class="type">EditText</span> <span class="variable">et_password</span> <span class="operator">=</span> findViewById(R.id.password);</span><br><span class="line">        et_password.setOnFocusChangeListener(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onFocusChange</span><span class="params">(View v, <span class="type">boolean</span> hasFocus)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (hasFocus)&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">password</span>  <span class="operator">=</span> et_message.getText().toString();</span><br><span class="line">            <span class="keyword">if</span> (TextUtils.isEmpty(password) || password.length() &lt; <span class="number">8</span>)&#123;</span><br><span class="line">                et_message.requestFocus();</span><br><span class="line">                Toast.makeText(<span class="built_in">this</span>,<span class="string">&quot;请输入8位用户名&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-9文本变化监听器"><a href="#5-9文本变化监听器" class="headerlink" title="5.9文本变化监听器"></a>5.9文本变化监听器</h3><blockquote>
<p>调用编辑框对象的addTextChangelistener方法即可注册文本监听器</p>
<p>文本监听器的接口名位TextWatcher，该接口提供了3个监控方法</p>
<ul>
<li>beforeTextChanged</li>
<li>OnTextChanged</li>
<li>afterTextChanged</li>
</ul>
</blockquote>
<blockquote>
<p>隐藏输入框</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">hidenView</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">HidenInput</span><span class="params">(Activity ac, View v)</span>&#123;</span><br><span class="line">        <span class="comment">//从系统获取输入法管理器</span></span><br><span class="line">        <span class="type">InputMethodManager</span> <span class="variable">imm</span> <span class="operator">=</span> (InputMethodManager) ac.getSystemService(Context.INPUT_METHOD_SERVICE);</span><br><span class="line">        <span class="comment">//关闭输入法    得到窗口管理器</span></span><br><span class="line">        imm.hideSoftInputFromWindow(v.getWindowToken(),<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity2</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> EditText et_password;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main2);</span><br><span class="line"></span><br><span class="line">        et_password = findViewById(R.id.password);</span><br><span class="line">        et_password.addTextChangedListener(<span class="keyword">new</span> <span class="title class_">HidenTextWatcher</span>(et_password,<span class="number">11</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义，当达到指定值后隐藏文本框</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">HidenTextWatcher</span> <span class="keyword">implements</span> <span class="title class_">TextWatcher</span>&#123;</span><br><span class="line">        <span class="keyword">private</span> EditText et;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> maxLength;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">HidenTextWatcher</span><span class="params">(EditText et,<span class="type">int</span> maxlength)</span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.et = et;</span><br><span class="line">            <span class="built_in">this</span>.maxLength = maxlength;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beforeTextChanged</span><span class="params">(CharSequence s, <span class="type">int</span> start, <span class="type">int</span> count, <span class="type">int</span> after)</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTextChanged</span><span class="params">(CharSequence s, <span class="type">int</span> start, <span class="type">int</span> before, <span class="type">int</span> count)</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterTextChanged</span><span class="params">(Editable s)</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">test</span> <span class="operator">=</span> s.toString();</span><br><span class="line">            <span class="keyword">if</span> (test.length() == <span class="number">11</span> &amp;&amp; maxLength==<span class="number">11</span>)&#123;</span><br><span class="line">                hidenView.HidenInput(MainActivity2.<span class="built_in">this</span>,et_password);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-10提醒对话框"><a href="#5-10提醒对话框" class="headerlink" title="5.10提醒对话框"></a>5.10提醒对话框</h3><blockquote>
<p>AlertDialog</p>
<p>借助建造器AlertDialog.Builder才能完成设置</p>
<p>调用建造器的create方法生产对话框实例，再调用对话框实例的show方法，在页面提示对话框</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity3</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TextView tv_dialog;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main3);</span><br><span class="line">        findViewById(R.id.btn_diolog).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        tv_dialog = findViewById(R.id.diolog_view);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        AlertDialog.<span class="type">Builder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(<span class="built_in">this</span>);</span><br><span class="line">        builder.setTitle(<span class="string">&quot;尊敬的用户&quot;</span>);</span><br><span class="line">        builder.setMessage(<span class="string">&quot;是否卸载&quot;</span>);</span><br><span class="line">        builder.setPositiveButton(<span class="string">&quot;取消&quot;</span>,((dialog, which) -&gt; &#123;</span><br><span class="line">            tv_dialog.setText(<span class="string">&quot;没有卸载&quot;</span>);</span><br><span class="line">        &#125;));</span><br><span class="line">        builder.setNegativeButton(<span class="string">&quot;确认&quot;</span>,((dialog, which) -&gt; &#123;</span><br><span class="line">            tv_dialog.setText(<span class="string">&quot;卸载成功&quot;</span>);</span><br><span class="line">        &#125;));</span><br><span class="line">        <span class="type">AlertDialog</span> <span class="variable">alertDialog</span> <span class="operator">=</span> builder.create();</span><br><span class="line">        alertDialog.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>setIcon:设置图标</p>
<p>setTitle设置对话框的标题文本</p>
<p>setMessage设置对话框的文本</p>
<p>setPositiveButton设置肯定按钮</p>
<p>setNegativeButton 设置否定按钮</p>
<p>setNeutralButton设置中性按钮</p>
</blockquote>
<h3 id="5-11日期选择器"><a href="#5-11日期选择器" class="headerlink" title="5.11日期选择器"></a>5.11日期选择器</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">DatePicker</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/dp_date&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:calendarViewShown</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:datePickerMode</span>=<span class="string">&quot;spinner&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    setContentView(R.layout.activity_main4);</span><br><span class="line">    findViewById(R.id.dp_btn).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">    dp = findViewById(R.id.dp_date);</span><br><span class="line">    dp_show =findViewById(R.id.dp_dateshow);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (v.getId() == R.id.dp_btn)&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">format</span> <span class="operator">=</span> String.format(<span class="string">&quot;日期是%d年%d月%d日&quot;</span>,dp.getYear(),dp.getMonth()+<span class="number">1</span>,dp.getDayOfMonth());</span><br><span class="line">        dp_show.setText(format);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>新建一个Calender实例获取时间</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Calendar</span> <span class="variable">calendar</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">calendar.get(Calendar.YEAR);</span><br><span class="line">calendar.get(Calendar.MONTH);</span><br><span class="line">calendar.get(Calendar.DAY_OF_MONTH);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>DatePickDiolog</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (v.getId() == R.id.dp_btn)&#123;</span><br><span class="line"><span class="comment">/*            String format = String.format(&quot;日期是%d年%d月%d日&quot;,dp.getYear(),dp.getMonth()+1,dp.getDayOfMonth());</span></span><br><span class="line"><span class="comment">            dp_show.setText(format);*/</span></span><br><span class="line">          <span class="comment">/*  Calendar calendar = Calendar.getInstance();</span></span><br><span class="line"><span class="comment">            calendar.get(Calendar.YEAR);</span></span><br><span class="line"><span class="comment">            calendar.get(Calendar.MONTH);</span></span><br><span class="line"><span class="comment">            calendar.get(Calendar.DAY_OF_MONTH);*/</span></span><br><span class="line">            <span class="type">DatePickerDialog</span> <span class="variable">dialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatePickerDialog</span>(<span class="built_in">this</span>,<span class="built_in">this</span>,<span class="number">2090</span>,<span class="number">5</span>,<span class="number">11</span>);</span><br><span class="line">            dialog.show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDateSet</span><span class="params">(DatePicker view, <span class="type">int</span> year, <span class="type">int</span> month, <span class="type">int</span> dayOfMonth)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">format</span> <span class="operator">=</span> String.format(<span class="string">&quot;日期是%d年%d月%d日&quot;</span>,year,month+<span class="number">1</span>,dayOfMonth);</span><br><span class="line">        dp_show.setText(format);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-12时间选择器"><a href="#5-12时间选择器" class="headerlink" title="5.12时间选择器"></a>5.12时间选择器</h3><blockquote>
<p>TimePickDialog</p>
<p>TimePicker类似DatePicker,可以选择具体的小时</p>
<p>TimePickDiolog的用法类似DatePickDiolog</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">TimePickDialog</span> <span class="variable">dialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TimePickDialog</span>(<span class="built_in">this</span>,[android.R.style.Theme.Holo_Light_dialog    ],<span class="built_in">this</span>,calendar.get(Calendar.HOUR_OF_DAY),calender.get(Calendar.MINUTE),<span class="literal">true</span>)</span><br><span class="line">    <span class="comment">//android.R.style.Theme.Holo_Light_dialog 设置为横向选择样式</span></span><br><span class="line">    <span class="comment">//true 为是否开启24小时制</span></span><br></pre></td></tr></table></figure>

<h3 id="5-13小案例"><a href="#5-13小案例" class="headerlink" title="5.13小案例"></a>5.13小案例</h3><blockquote>
<p>页面布局</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/main&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">RadioGroup</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/rg_login&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;@dimen/item_layout_height&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/rg_withpwd&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:checked</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;@string/login_withpwd&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/item_line_height&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/withoutpwd&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;@string/login_withoutpwd&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/item_line_height&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">RadioGroup</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;@dimen/item_layout_height&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;@string/phonenumber&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@color/black&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/item_line_height&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/et_phone&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;@drawable/shape&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:hint</span>=<span class="string">&quot;@string/inputnumber&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:maxLength</span>=<span class="string">&quot;11&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@color/black&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:inputType</span>=<span class="string">&quot;number&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColorHint</span>=<span class="string">&quot;@color/gray&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/item_line_height&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;@dimen/item_layout_height&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_password&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;@string/loginpassword&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@color/black&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/item_line_height&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/et_password&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@drawable/shape&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:hint</span>=<span class="string">&quot;@string/inputpassword&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:maxLength</span>=<span class="string">&quot;6&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;@color/black&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:inputType</span>=<span class="string">&quot;numberPassword&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColorHint</span>=<span class="string">&quot;@color/gray&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/item_line_height&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_password&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;@string/forgetpassword&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_alignParentEnd</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@color/gray&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColorHint</span>=<span class="string">&quot;@color/gray&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/item_line_height&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/check_number&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;@string/remenumber&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/beginlogin&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;@string/login&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/item_line_height&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/gray&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>代码逻辑</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity5</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">RadioGroup</span>.OnCheckedChangeListener, View.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TextView tv_password;</span><br><span class="line">    <span class="keyword">private</span> EditText et_password;</span><br><span class="line">    <span class="keyword">private</span> Button btn_password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> CheckBox checkBox;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> RadioButton withpwd;</span><br><span class="line">    RadioButton withoutpwd;</span><br><span class="line">    <span class="keyword">private</span> ActivityResultLauncher&lt;Intent&gt; register;</span><br><span class="line">    <span class="keyword">private</span> EditText et_phone;</span><br><span class="line">    <span class="keyword">private</span> Button btn_login;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String clearPassword=<span class="string">&quot;111111&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> String verifycode;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressLint(&quot;MissingInflatedId&quot;)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main5);</span><br><span class="line">        RadioGroup group= findViewById(R.id.rg_login);</span><br><span class="line">        group.setOnCheckedChangeListener(<span class="built_in">this</span>);</span><br><span class="line">        tv_password = findViewById(R.id.tv_password);</span><br><span class="line">        et_password = findViewById(R.id.et_password);</span><br><span class="line">        btn_password = findViewById(R.id.btn_password);</span><br><span class="line">        btn_password.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        checkBox = findViewById(R.id.check_number);</span><br><span class="line">        et_phone = findViewById(R.id.et_phone);</span><br><span class="line">        withpwd = findViewById(R.id.rg_withpwd);</span><br><span class="line">        withoutpwd = findViewById(R.id.withoutpwd);</span><br><span class="line">        btn_login = findViewById(R.id.beginlogin);</span><br><span class="line">        btn_login.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        et_phone.addTextChangedListener(<span class="keyword">new</span> <span class="title class_">HideTextWatcher</span>(et_phone,<span class="number">11</span>));</span><br><span class="line">        et_password.addTextChangedListener(<span class="keyword">new</span> <span class="title class_">HideTextWatcher</span>(et_password,<span class="number">6</span>));</span><br><span class="line">        register = registerForActivityResult(<span class="keyword">new</span> <span class="title class_">ActivityResultContracts</span>.StartActivityForResult(), <span class="keyword">new</span> <span class="title class_">ActivityResultCallback</span>&lt;ActivityResult&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onActivityResult</span><span class="params">(ActivityResult o)</span> &#123;</span><br><span class="line">                <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> o.getData();</span><br><span class="line">                <span class="keyword">if</span> (intent != <span class="literal">null</span> &amp;&amp; o.getResultCode()== Activity.RESULT_OK)&#123;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">newpassword</span> <span class="operator">=</span> intent.getStringExtra(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">                    clearPassword = newpassword;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCheckedChanged</span><span class="params">(RadioGroup group, <span class="type">int</span> checkedId)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (checkedId==R.id.rg_withpwd)&#123;</span><br><span class="line">            tv_password.setText(getString(R.string.loginpassword));</span><br><span class="line">            et_password.setHint(getString(R.string.inputpassword));</span><br><span class="line">            btn_password.setText(getString(R.string.forgetpassword));</span><br><span class="line">            checkBox.setVisibility(View.VISIBLE);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (checkedId == R.id.withoutpwd)&#123;</span><br><span class="line">            tv_password.setText(getString(R.string.verifycode));</span><br><span class="line">            et_password.setHint(getString(R.string.input_verifycode));</span><br><span class="line">            btn_password.setText(getString(R.string.getverifycode));</span><br><span class="line">            checkBox.setVisibility(View.GONE);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">phone</span> <span class="operator">=</span> et_phone.getText().toString();</span><br><span class="line">        <span class="keyword">if</span> (v.getId() == R.id.btn_password)&#123;</span><br><span class="line">            <span class="keyword">if</span> (withpwd.isChecked())&#123;</span><br><span class="line">                <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>, MainActivity7.class);</span><br><span class="line">                intent.putExtra(<span class="string">&quot;phone&quot;</span>,phone);</span><br><span class="line">                register.launch(intent);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (withoutpwd.isChecked())&#123;</span><br><span class="line">                verifycode = String.format(<span class="string">&quot;%06d&quot;</span>,<span class="keyword">new</span> <span class="title class_">Random</span>().nextInt(<span class="number">999999</span>));</span><br><span class="line">                AlertDialog.<span class="type">Builder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(<span class="built_in">this</span>);</span><br><span class="line">                builder.setTitle(<span class="string">&quot;验证码&quot;</span>);</span><br><span class="line">                builder.setMessage(verifycode);</span><br><span class="line">                builder.setPositiveButton(<span class="string">&quot;确认&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">                <span class="type">AlertDialog</span> <span class="variable">dialog</span> <span class="operator">=</span> builder.create();</span><br><span class="line">                dialog.show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (v.getId() == R.id.beginlogin)&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> et_password.getText().toString();</span><br><span class="line">            <span class="keyword">if</span> (withpwd.isChecked())&#123;</span><br><span class="line">                <span class="keyword">if</span> (!password.equals(clearPassword))&#123;</span><br><span class="line">                    Toast.makeText(<span class="built_in">this</span>,<span class="string">&quot;请输入正确的密码&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                LoinSuccess();</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (withoutpwd.isChecked())&#123;</span><br><span class="line">                <span class="keyword">if</span> (!password.equals(verifycode))&#123;</span><br><span class="line">                    Toast.makeText(<span class="built_in">this</span>,<span class="string">&quot;请输入正确的验证码&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                LoinSuccess();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">LoinSuccess</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">mes</span> <span class="operator">=</span> <span class="string">&quot;登录成功&quot;</span>;</span><br><span class="line">        AlertDialog.Builder builder= <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(<span class="built_in">this</span>);</span><br><span class="line">        builder.setTitle(<span class="string">&quot;登录成功&quot;</span>);</span><br><span class="line">        builder.setMessage(mes);</span><br><span class="line">        builder.setPositiveButton(<span class="string">&quot;确认返回&quot;</span>,((dialog, which) -&gt; &#123;</span><br><span class="line">            finish();</span><br><span class="line">        &#125;));</span><br><span class="line">        builder.setNegativeButton(<span class="string">&quot;我再看看&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">        <span class="type">Dialog</span> <span class="variable">dialog</span> <span class="operator">=</span> builder.create();</span><br><span class="line">        dialog.show();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">HideTextWatcher</span> <span class="keyword">implements</span> <span class="title class_">TextWatcher</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> EditText et;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> maxlength;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">HideTextWatcher</span><span class="params">(EditText et_phone,<span class="type">int</span> maxlength)</span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.et = et_phone;</span><br><span class="line">            <span class="built_in">this</span>.maxlength = maxlength;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beforeTextChanged</span><span class="params">(CharSequence s, <span class="type">int</span> start, <span class="type">int</span> count, <span class="type">int</span> after)</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTextChanged</span><span class="params">(CharSequence s, <span class="type">int</span> start, <span class="type">int</span> before, <span class="type">int</span> count)</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterTextChanged</span><span class="params">(Editable s)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.toString().length() == maxlength )&#123;</span><br><span class="line">                hidenView.HidenInput(MainActivity5.<span class="built_in">this</span>,et);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>找回密码布局</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/main&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;@dimen/item_layout_height&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;@string/newpassword&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@color/black&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/item_line_height&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/new_password&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;@drawable/shape&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:hint</span>=<span class="string">&quot;@string/inputnewpassword&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:maxLength</span>=<span class="string">&quot;6&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@color/black&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:inputType</span>=<span class="string">&quot;number&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColorHint</span>=<span class="string">&quot;@color/gray&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/item_line_height&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;@dimen/item_layout_height&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;@string/newpasswordagain&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@color/black&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/item_line_height&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/new_passwordagain&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;@drawable/shape&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:hint</span>=<span class="string">&quot;@string/inputnewpasswordagain&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:maxLength</span>=<span class="string">&quot;6&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@color/black&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:inputType</span>=<span class="string">&quot;number&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColorHint</span>=<span class="string">&quot;@color/gray&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/item_line_height&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;@dimen/item_layout_height&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_newverify&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;@string/verifycode&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@color/black&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/item_line_height&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/et_newverify&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@drawable/shape&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:hint</span>=<span class="string">&quot;@string/input_verifycode&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:maxLength</span>=<span class="string">&quot;6&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">&quot;@color/black&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:inputType</span>=<span class="string">&quot;numberPassword&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColorHint</span>=<span class="string">&quot;@color/gray&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/item_line_height&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_newverify&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;@string/getverifycode&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_alignParentEnd</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@color/gray&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColorHint</span>=<span class="string">&quot;@color/gray&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/item_line_height&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/beginnewpassword&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;@string/click&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/gray&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/item_line_height&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>找回密码逻辑</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity7</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    <span class="keyword">private</span> String verifycode;</span><br><span class="line">    <span class="keyword">private</span> EditText tv_newpassword;</span><br><span class="line">    <span class="keyword">private</span> EditText tv_newpasswordagin;</span><br><span class="line">    <span class="keyword">private</span> EditText et_newverify;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressLint(&quot;MissingInflatedId&quot;)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main7);</span><br><span class="line">        phone = getIntent().getStringExtra(<span class="string">&quot;phone&quot;</span>);</span><br><span class="line">        findViewById(R.id.btn_newverify).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.beginnewpassword).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        tv_newpassword = findViewById(R.id.new_password);</span><br><span class="line">        tv_newpasswordagin = findViewById(R.id.new_passwordagain);</span><br><span class="line">        et_newverify = findViewById(R.id.et_newverify);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (v.getId()==R.id.btn_newverify)&#123;</span><br><span class="line">            verifycode = String.format(<span class="string">&quot;%06d&quot;</span>,<span class="keyword">new</span> <span class="title class_">Random</span>().nextInt(<span class="number">999999</span>));</span><br><span class="line">            AlertDialog.<span class="type">Builder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(<span class="built_in">this</span>);</span><br><span class="line">            builder.setTitle(<span class="string">&quot;验证码&quot;</span>);</span><br><span class="line">            builder.setMessage(verifycode);</span><br><span class="line">            builder.setPositiveButton(<span class="string">&quot;确认&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">            <span class="type">AlertDialog</span> <span class="variable">dialog</span> <span class="operator">=</span> builder.create();</span><br><span class="line">            dialog.show();</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (v.getId() == R.id.beginnewpassword)&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">passwd</span> <span class="operator">=</span> tv_newpassword.getText().toString();</span><br><span class="line">            <span class="type">String</span> <span class="variable">newpasswd</span> <span class="operator">=</span> tv_newpasswordagin.getText().toString();</span><br><span class="line">            <span class="type">String</span> <span class="variable">mycode</span> <span class="operator">=</span> et_newverify.getText().toString();</span><br><span class="line">            <span class="keyword">if</span> (passwd.length()&lt;<span class="number">6</span> || newpasswd.length()&lt;<span class="number">6</span>)&#123;</span><br><span class="line">                Toast.makeText(<span class="built_in">this</span>,<span class="string">&quot;密码长度不合适&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!passwd.equals(newpasswd))&#123;</span><br><span class="line">                Toast.makeText(<span class="built_in">this</span>,<span class="string">&quot;两次密码不一致&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!mycode.equals(verifycode))&#123;</span><br><span class="line">                Toast.makeText(<span class="built_in">this</span>,<span class="string">&quot;验证码错误&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();</span><br><span class="line">            intent.putExtra(<span class="string">&quot;password&quot;</span>,passwd);</span><br><span class="line">            setResult(Activity.RESULT_OK,intent);</span><br><span class="line">            finish();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-SharePreferences"><a href="#6-SharePreferences" class="headerlink" title="6.SharePreferences"></a>6.SharePreferences</h2><blockquote>
<p>SharePreferences是Android的一个轻量级存储工具，采用键值对的方式</p>
<p>&#x2F;data&#x2F;data&#x2F;应用包名&#x2F;shared_prefs&#x2F;文件名.xml</p>
</blockquote>
<blockquote>
<p>App个性化配置信息，用户使用App的行为信息、临时需要保存的片段信息</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> EditText et_name;</span><br><span class="line">    <span class="keyword">private</span> EditText et_age;</span><br><span class="line">    <span class="keyword">private</span> EditText et_height;</span><br><span class="line">    <span class="keyword">private</span> EditText et_weight;</span><br><span class="line">    <span class="keyword">private</span> SharedPreferences preferences;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        et_name = findViewById(R.id.et_name);</span><br><span class="line">        et_age = findViewById(R.id.et_age);</span><br><span class="line">        et_height = findViewById(R.id.et_height);</span><br><span class="line">        et_weight = findViewById(R.id.et_weight);</span><br><span class="line"></span><br><span class="line">        findViewById(R.id.submit).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">        preferences = getSharedPreferences(<span class="string">&quot;config&quot;</span>, Context.MODE_PRIVATE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> et_name.getText().toString();</span><br><span class="line">        <span class="type">String</span> <span class="variable">age</span> <span class="operator">=</span> et_age.getText().toString();</span><br><span class="line">        <span class="type">String</span> <span class="variable">height</span> <span class="operator">=</span> et_height.getText().toString();</span><br><span class="line">        <span class="type">String</span> <span class="variable">weight</span> <span class="operator">=</span> et_weight.getText().toString();</span><br><span class="line">        SharedPreferences.<span class="type">Editor</span> <span class="variable">ediit</span> <span class="operator">=</span> preferences.edit();</span><br><span class="line">        ediit.putString(<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">        ediit.putInt(<span class="string">&quot;age&quot;</span>,Integer.parseInt(age));</span><br><span class="line">        ediit.putFloat(<span class="string">&quot;height&quot;</span>,Float.parseFloat(height));</span><br><span class="line">        ediit.putFloat(<span class="string">&quot;weight&quot;</span>,Float.parseFloat(weight));</span><br><span class="line">        ediit.apply();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>data&#x2F;data&#x2F;包名&#x2F;shared_prefs</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">reload</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//取数据</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span>  preferences.getString(<span class="string">&quot;name&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">if</span> (name!=<span class="literal">null</span>)&#123;</span><br><span class="line">        et_name.setText(name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> preferences.getInt(<span class="string">&quot;age&quot;</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (age !=<span class="number">0</span>)&#123;</span><br><span class="line">        et_age.setText(String.valueOf(age));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">float</span> <span class="variable">height</span> <span class="operator">=</span> preferences.getFloat(<span class="string">&quot;height&quot;</span>,<span class="number">0f</span>);</span><br><span class="line">    <span class="keyword">if</span> (height !=<span class="number">0f</span>)&#123;</span><br><span class="line">        et_height.setText(String.valueOf(height));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">float</span> <span class="variable">weight</span> <span class="operator">=</span> preferences.getFloat(<span class="string">&quot;weight&quot;</span>,<span class="number">0f</span>);</span><br><span class="line">    <span class="keyword">if</span> (height !=<span class="number">0f</span>)&#123;</span><br><span class="line">        et_weight.setText(String.valueOf(weight));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-SQLLite"><a href="#7-SQLLite" class="headerlink" title="7.SQLLite"></a>7.SQLLite</h2><h3 id="7-1-管理类"><a href="#7-1-管理类" class="headerlink" title="7.1.管理类"></a>7.1.管理类</h3><p>openDatabase:打开指定路径的数据库</p>
<p>isopen：判断数据库是否打开</p>
<p>close：关闭数据库</p>
<p>getVersion：获取数据库的般般号</p>
<p>setVersion：设置数据库的版本号</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity8</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String mDatabase;</span><br><span class="line">    <span class="keyword">private</span> TextView tv_database;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main8);</span><br><span class="line">        findViewById(R.id.createdatabase).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.deletedatabase).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        <span class="comment">//数据库的路径</span></span><br><span class="line">        mDatabase = getFilesDir() + <span class="string">&quot;/test.db&quot;</span>;</span><br><span class="line">        tv_database = findViewById(R.id.tv_view);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (v.getId() == R.id.createdatabase)&#123;</span><br><span class="line">            <span class="type">SQLiteDatabase</span> <span class="variable">sqLiteDatabase</span> <span class="operator">=</span> openOrCreateDatabase(mDatabase, Context.MODE_PRIVATE, <span class="literal">null</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">desc</span> <span class="operator">=</span> String.format(<span class="string">&quot;%s创建%s&quot;</span>,sqLiteDatabase.getPath(), <span class="string">&quot;成功&quot;</span>);</span><br><span class="line">            tv_database.setText(desc);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(v.getId() == R.id.deletedatabase) &#123;</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span> deleteDatabase(mDatabase);</span><br><span class="line">            <span class="type">String</span> <span class="variable">desc</span> <span class="operator">=</span> String.format(<span class="string">&quot;%s删除%s&quot;</span>,mDatabase,result ? <span class="string">&quot;成功&quot;</span> : <span class="string">&quot;失败&quot;</span>);</span><br><span class="line">            tv_database.setText(desc);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>SQLiteOPenHeaper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDBHelper</span> <span class="keyword">extends</span> <span class="title class_">SQLiteOpenHelper</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DB_NAME</span> <span class="operator">=</span> <span class="string">&quot;user.db&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DB_VSERSION</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TABLE_NAME</span> <span class="operator">=</span> <span class="string">&quot;user_info&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">UserDBHelper</span> <span class="variable">mhelper</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">SQLiteDatabase</span> <span class="variable">mRdb</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">SQLiteDatabase</span> <span class="variable">mWdb</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">UserDBHelper</span><span class="params">(Context context)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(context,DB_NAME,<span class="literal">null</span>,DB_VSERSION);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//利用单例模式获取数据库帮助器的唯一实例</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> UserDBHelper <span class="title function_">getInstance</span><span class="params">(Context context)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mhelper == <span class="literal">null</span>)&#123;</span><br><span class="line">            mhelper = <span class="keyword">new</span> <span class="title class_">UserDBHelper</span>(context);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> mhelper;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//打开数据库的读连接</span></span><br><span class="line">    <span class="keyword">public</span> SQLiteDatabase <span class="title function_">openReadLink</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mRdb == <span class="literal">null</span> || mRdb.isOpen())&#123;</span><br><span class="line">            mRdb = mhelper.getReadableDatabase();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> mRdb;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//打开数据库的写连接</span></span><br><span class="line">    <span class="keyword">public</span> SQLiteDatabase <span class="title function_">openWriteLink</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mWdb == <span class="literal">null</span> || mWdb.isOpen())&#123;</span><br><span class="line">            mWdb = mhelper.getWritableDatabase();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> mWdb;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//关闭数据库</span></span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">void</span> <span class="title function_">closeLink</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mRdb != <span class="literal">null</span> &amp;&amp; mRdb.isOpen())&#123;</span><br><span class="line">            mRdb.close();</span><br><span class="line">            mRdb = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (mWdb != <span class="literal">null</span> &amp;&amp; mWdb.isOpen())&#123;</span><br><span class="line">            mWdb.close();</span><br><span class="line">            mWdb = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(SQLiteDatabase db)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;create table if not exists user_info(_id integer primary key autoincrement not null,&quot;</span></span><br><span class="line">                +<span class="string">&quot;name varchar not null&quot;</span>+<span class="string">&quot;)&quot;</span>;</span><br><span class="line">        db.execSQL(sql);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onUpgrade</span><span class="params">(SQLiteDatabase db, <span class="type">int</span> oldVersion, <span class="type">int</span> newVersion)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>增删改</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//增</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">long</span> <span class="title function_">insert</span><span class="params">(user user)</span>&#123;</span><br><span class="line">    <span class="type">ContentValues</span> <span class="variable">values</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>();</span><br><span class="line">    values.put(<span class="string">&quot;name&quot;</span>,user.name);</span><br><span class="line">    <span class="keyword">return</span> mWdb.insert(TABLE_NAME,<span class="literal">null</span>,values);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//删</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">long</span> <span class="title function_">delete</span><span class="params">(String name)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> mWdb.delete(TABLE_NAME,<span class="string">&quot;name=?&quot;</span>,<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;name&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//改</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">long</span> <span class="title function_">update</span><span class="params">(user user)</span>&#123;</span><br><span class="line">    <span class="type">ContentValues</span> <span class="variable">contentValues</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>();</span><br><span class="line">    contentValues.put(<span class="string">&quot;name&quot;</span>,user.name);</span><br><span class="line">    <span class="keyword">return</span> mWdb.update(TABLE_NAME,contentValues,<span class="string">&quot;name=?&quot;</span>,<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;user.name&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-2-事务类"><a href="#7-2-事务类" class="headerlink" title="7.2.事务类"></a>7.2.事务类</h3><blockquote>
<p>beginTransaction:开始事务</p>
<p>setTransactionSuccessful:设置事务成功的标志</p>
<p>endTransaction:结束事务</p>
</blockquote>
<h3 id="7-3-数据库版本更新"><a href="#7-3-数据库版本更新" class="headerlink" title="7.3.数据库版本更新"></a>7.3.数据库版本更新</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onUpgrade</span><span class="params">(SQLiteDatabase db, <span class="type">int</span> oldVersion, <span class="type">int</span> newVersion)</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-4-外部存储和内部存储，外部SD卡"><a href="#7-4-外部存储和内部存储，外部SD卡" class="headerlink" title="7.4.外部存储和内部存储，外部SD卡"></a>7.4.外部存储和内部存储，外部SD卡</h3><blockquote>
<p>读写文件操作类</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileUtil</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">saveText</span><span class="params">(String path,String txt)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">BufferedWriter</span> <span class="variable">os</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            os = <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(path));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (os!=<span class="literal">null</span>)&#123;</span><br><span class="line">                os.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">openText</span><span class="params">(String path)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            rs = <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(path));</span><br><span class="line">            <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">while</span>((line=rs.readLine())!=<span class="literal">null</span>)&#123;</span><br><span class="line">                sb.append(line);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (rs != <span class="literal">null</span>) &#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> rs.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>获取外部存储的私有空间</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">path</span>  <span class="operator">=</span> directory+ File.separatorChar+fileName;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>获取外部存储公共空间</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取外部公共空间</span></span><br><span class="line">directory=Environment.getExternalStorageState();</span><br></pre></td></tr></table></figure>

<blockquote>
<p>内部存储私有空间</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//内部存储私有空间</span></span><br><span class="line">directory = getFilesDir().toString();</span><br></pre></td></tr></table></figure>

<h3 id="7-5-在存储卡读写图片文件"><a href="#7-5-在存储卡读写图片文件" class="headerlink" title="7.5.在存储卡读写图片文件"></a>7.5.在存储卡读写图片文件</h3><p>Bitmap</p>
<blockquote>
<p>BitmaoFactory读写各种来源的图片</p>
<p>decodeResource 从资源文件中读取图片信息</p>
<p>decodeFile 指定路径的图片获取到bitmap对象</p>
<p>decodeStream从输入流获取位图数据</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (v.getId() == R.id. create)&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> System.currentTimeMillis() + <span class="string">&quot;.png&quot;</span>;</span><br><span class="line">        path = getExternalFilesDir(Environment.DIRECTORY_DOWNLOADS).toString()+ File.separatorChar+fileName;</span><br><span class="line">        <span class="type">Bitmap</span> <span class="variable">bitmap</span> <span class="operator">=</span> BitmapFactory.decodeResource(getResources(), R.drawable.gl);</span><br><span class="line">        FileUtil.saveImage(path,bitmap);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (v.getId() == R.id.delete)&#123;</span><br><span class="line">        <span class="type">Bitmap</span> <span class="variable">bitmap</span> <span class="operator">=</span> FileUtil.openImage(path);</span><br><span class="line">        im.setImageBitmap(bitmap);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>文件操作FileUtil</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">saveImage</span><span class="params">(String path, Bitmap bitmap)</span> &#123;</span><br><span class="line">    <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        fos = <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(path);</span><br><span class="line">        bitmap.compress(Bitmap.CompressFormat.PNG,<span class="number">100</span>,fos);</span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (fos != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fos.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Bitmap <span class="title function_">openImage</span><span class="params">(String path)</span> &#123;</span><br><span class="line">    <span class="type">Bitmap</span> <span class="variable">bitmap</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        fis = <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(path);</span><br><span class="line">        bitmap = decodeStream(fis);</span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (fis != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fis.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bitmap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="8-Application"><a href="#8-Application" class="headerlink" title="8.Application"></a>8.Application</h2><h3 id="8-1Application"><a href="#8-1Application" class="headerlink" title="8.1Application"></a>8.1Application</h3><blockquote>
<p>Application是Android的一大组件，在App运行过程中有且仅有一个Application对象贯穿整个生命周期</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> <span class="keyword">extends</span> <span class="title class_">android</span>.app.Application &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate();</span><br><span class="line">        Log.d(<span class="string">&quot;richu&quot;</span>,<span class="string">&quot;onCreate&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Andriod设备上不会执行</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTerminate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onTerminate();</span><br><span class="line">        Log.d(<span class="string">&quot;richu&quot;</span>,<span class="string">&quot;onTerminate&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//配置改变时</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onConfigurationChanged</span><span class="params">(<span class="meta">@NonNull</span> Configuration newConfig)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onConfigurationChanged(newConfig);</span><br><span class="line">        Log.d(<span class="string">&quot;richu&quot;</span>,<span class="string">&quot;onConfigure&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="8-2全局变量"><a href="#8-2全局变量" class="headerlink" title="8.2全局变量"></a>8.2全局变量</h3><blockquote>
<p>适用：会频繁读取的信息，用户名</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> <span class="keyword">extends</span> <span class="title class_">android</span>.app.Application &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Application application;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Application <span class="title function_">getinstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> application;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Andriod设备上不会执行</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTerminate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onTerminate();</span><br><span class="line">        application = <span class="built_in">this</span>;</span><br><span class="line">        Log.d(<span class="string">&quot;richu&quot;</span>,<span class="string">&quot;onTerminate&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> HashMap&lt;String,String&gt; infoMap= <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//配置改变时</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onConfigurationChanged</span><span class="params">(<span class="meta">@NonNull</span> Configuration newConfig)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onConfigurationChanged(newConfig);</span><br><span class="line">        Log.d(<span class="string">&quot;richu&quot;</span>,<span class="string">&quot;onConfigure&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">application.infoMap.put(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;richu&quot;</span>);</span><br><span class="line">name = application.infoMap.get(<span class="string">&quot;name&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="9-Room"><a href="#9-Room" class="headerlink" title="9.Room"></a>9.Room</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">implementation (&quot;androidx.room:room-runtime:2.2.6&quot;)</span><br><span class="line">implementation (&quot;androidx.room:room-ktx:2.2.6&quot;)</span><br><span class="line">testImplementation (&quot;androidx.room:room-testing:2.2.6&quot;)</span><br></pre></td></tr></table></figure>

<p>数据实体 Entry 表示应用的数据库中的表。数据实体用于更新表中的行所存储的数据以及创建新行供插入。</p>
<p>数据访问对象 (DAO) 提供应用在数据库中检索、更新、插入和删除数据所用的方法。</p>
<p>数据库类持有数据库，并且是应用数据库底层连接的主要访问点。数据库类为应用提供与该数据库关联的 DAO 的实例。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Dao</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="meta">@Insert()</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(Books... books)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Delete</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Books... books)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">update</span><span class="params">(Books... books)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Query(&quot;select * from Books&quot;)</span></span><br><span class="line">    List&lt;Books&gt; <span class="title function_">queryAll</span><span class="params">()</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Query(&quot;select * from Books where id= :id&quot;)</span></span><br><span class="line">    Books <span class="title function_">queryById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//entities表示有哪些表  version为版本号 exportSchema表示是否导出数据库的json串</span></span><br><span class="line"><span class="meta">@Database(entities = &#123;Books.class&#125;,version = 1,exportSchema = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">BookDatabase</span> <span class="keyword">extends</span> <span class="title class_">RoomDatabase</span> &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在自定义的Appication创建BookDatabase实例</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bookDatabase = Room.databaseBuilder(<span class="built_in">this</span>,BookDatabase.class,<span class="string">&quot;book&quot;</span>).</span><br><span class="line">    <span class="comment">//允许迁移数据库</span></span><br><span class="line">    addMigrations().</span><br><span class="line">    <span class="comment">//允许主线程中操作数据库</span></span><br><span class="line">    allowMainThreadQueries().build();</span><br></pre></td></tr></table></figure>

<h2 id="10-ContentProvider"><a href="#10-ContentProvider" class="headerlink" title="10.ContentProvider"></a>10.ContentProvider</h2><h3 id="10-1-service端代码-编写"><a href="#10-1-service端代码-编写" class="headerlink" title="10.1.service端代码 编写"></a>10.1.service端代码 编写</h3><blockquote>
<p>为App存储内部数据提供统一的外部接口，让不同的外部应用之间得以共享数据</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">provider</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:name</span>=<span class="string">&quot;.provider.UserinfoProvider&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:authorities</span>=<span class="string">&quot;com.richuff.server.provider.UserinfoProvider&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:enabled</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:exported</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>uri  通用资源标识符   代表数据操作的地址  每一个ContentProvider都有一个唯一的值。ContentProvider使用的Uri的语法结构如下</p>
<p>在 Android 中，<code>ContentProvider</code>使用的<code>Uri</code>（统一资源标识符）有一个标准的语法结构。一般形式为<code>content://authority/path</code>。</p>
<p>conten:&#x2F;&#x2F;是一个固定的前缀，用于表明这是一个内容提供者（<code>ContentProvider</code>）相关的<code>Uri</code>，所有通过<code>ContentResolver</code>访问<code>ContentProvider</code>的<code>Uri</code>都以这个前缀开头。</p>
<p>关键部分之一，它用于唯一标识一个ContentProvider。通常，authority是一个字符串，格式类似于一个包名或者反向域名（例如com.example.app.provider）。在AndroidManifest.xml文件中，当注册ContentProvider时，android:authorities属性的值就是这个authority。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">provider</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;.MyContentProvider&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:authorities</span>=<span class="string">&quot;com.example.myapp.provider&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:exported</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>应用通过这个<code>authority</code>来定位要访问的<code>ContentProvider</code>。不同的<code>ContentProvider</code>应该有不同的<code>authority</code>，以避免冲突。</p>
<p>path<code>是可选的，它用于在一个</code>ContentProvider<code>内部进一步划分资源或者数据集合。例如，一个</code>ContentProvider<code>可能管理用户信息和订单信息，那么可以通过不同的</code>path<code>来区分访问用户信息（如</code>content:&#x2F;&#x2F;com.example.myapp.provider&#x2F;users<code>）和访问订单信息（如</code>content:&#x2F;&#x2F;com.example.myapp.provider&#x2F;orders<code>）。</code></p>
<p><code>path</code>可以包含多层路径，例如<code>content://com.example.myapp.provider/users/profile</code>，可以用于更精细地划分数据访问路径，这里可能表示访问用户信息中的用户资料部分。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserinfoProvider</span> <span class="keyword">extends</span> <span class="title class_">ContentProvider</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> UserinfoDatabase userinfoDatabase;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserinfoProvider</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">delete</span><span class="params">(Uri uri, String selection, String[] selectionArgs)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>(<span class="string">&quot;Not yet implemented&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getType</span><span class="params">(Uri uri)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>(<span class="string">&quot;Not yet implemented&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Uri <span class="title function_">insert</span><span class="params">(Uri uri, ContentValues values)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;/user&quot;</span>.equals(uri.getPath())) &#123;</span><br><span class="line">            <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> userinfoDatabase.getWritableDatabase();</span><br><span class="line">            db.insert(UserinfoDatabase.TABLE_NAME, <span class="literal">null</span>, values);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> uri;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onCreate</span><span class="params">()</span> &#123;</span><br><span class="line">        userinfoDatabase = UserinfoDatabase.getInstance(getContext());</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Cursor <span class="title function_">query</span><span class="params">(Uri uri, String[] projection, String selection,</span></span><br><span class="line"><span class="params">                        String[] selectionArgs, String sortOrder)</span> &#123;</span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> userinfoDatabase.getReadableDatabase();</span><br><span class="line">        <span class="keyword">return</span> db.query(UserinfoDatabase.TABLE_NAME, projection, selection, selectionArgs, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(Uri uri, ContentValues values, String selection,</span></span><br><span class="line"><span class="params">                      String[] selectionArgs)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>(<span class="string">&quot;Not yet implemented&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="10-2-client端代码"><a href="#10-2-client端代码" class="headerlink" title="10.2.client端代码"></a>10.2.client端代码</h3><blockquote>
<p>通过<code>ContentResolver</code>访问数据</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ContentValues</span> <span class="variable">values</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>();</span><br><span class="line">values.put(UserinfoContent.PASSWORD,<span class="string">&quot;test&quot;</span>);</span><br><span class="line">values.put(UserinfoContent.PHONE,<span class="string">&quot;11111&quot;</span>);</span><br><span class="line">values.put(UserinfoContent.ISCHECKED,<span class="number">1</span>);</span><br><span class="line">getContentResolver().insert(UserinfoContent.CONTENT_URI,values);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用<code>getContentResolver()</code>获取数据</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (v.getId() == R.id.read)&#123;</span><br><span class="line">            <span class="comment">//查询</span></span><br><span class="line">            <span class="type">Cursor</span> <span class="variable">cursor</span> <span class="operator">=</span> getContentResolver().query(UserinfoContent.CONTENT_URI,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>);</span><br><span class="line">            <span class="keyword">if</span> (cursor != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">while</span> (cursor.moveToNext())&#123;</span><br><span class="line">                    <span class="comment">//接收数据</span></span><br><span class="line">                    <span class="type">User</span> <span class="variable">info</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">                    info.id = cursor.getInt(cursor.getColumnIndex(UserinfoContent._ID));</span><br><span class="line">                    info.name = cursor.getString(cursor.getColumnIndex(UserinfoContent.NAME));</span><br><span class="line"></span><br><span class="line">                    info.height = cursor.getLong(cursor.getColumnIndex(UserinfoContent.HEIGHT));</span><br><span class="line">                    info.age = cursor.getInt(cursor.getColumnIndex(UserinfoContent.AGE));</span><br><span class="line">                    info.weight = cursor.getFloat(cursor.getColumnIndex(UserinfoContent.WEIGHT));</span><br><span class="line">				</span><br><span class="line">                    Log.d(<span class="string">&quot;mytag&quot;</span>, info.toString());</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//关闭cursor</span></span><br><span class="line">                cursor.close();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (v.getId() == R.id.write)&#123;</span><br><span class="line">            <span class="comment">//保存</span></span><br><span class="line">            <span class="type">ContentValues</span> <span class="variable">values</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>();</span><br><span class="line">            values.put(UserinfoContent.NAME,name.getText().toString());</span><br><span class="line">            values.put(UserinfoContent.AGE,age.getText().toString());</span><br><span class="line">            values.put(UserinfoContent.HEIGHT,height.getText().toString());</span><br><span class="line">            values.put(UserinfoContent.WEIGHT,weight.getText().toString());</span><br><span class="line">            <span class="comment">//插入数据</span></span><br><span class="line">            getContentResolver().insert(UserinfoContent.CONTENT_URI,values);</span><br><span class="line">            <span class="comment">//弹窗提示</span></span><br><span class="line">            Toastshow.show(<span class="built_in">this</span>,<span class="string">&quot;保存成功&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在android11之后要提前声明<br>在<code>AndroidManifest.xml</code>文件中声明需要访问的其他软件包</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">queries</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">provider</span> <span class="attr">android:authorities</span>=<span class="string">&quot;com.richuff.server.provider.UserinfoProvider&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">queries</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>提供contentprovider的uri</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserinfoContent</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">AUTHORITIES</span> <span class="operator">=</span> <span class="string">&quot;com.richuff.server.provider.UserinfoProvider&quot;</span>; <span class="comment">//服务端的具体类名</span></span><br><span class="line">    <span class="comment">//访问内容器的URI</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Uri</span> <span class="variable">CONTENT_URI</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;content://&quot;</span>+AUTHORITIES+<span class="string">&quot;/user&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">HEIGHT</span> <span class="operator">=</span> <span class="string">&quot;height&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">NAME</span> <span class="operator">=</span> <span class="string">&quot;name&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">WEIGHT</span> <span class="operator">=</span> <span class="string">&quot;weight&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">AGE</span> <span class="operator">=</span> <span class="string">&quot;age&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="10-3-进行数据的删除"><a href="#10-3-进行数据的删除" class="headerlink" title="10.3.进行数据的删除"></a>10.3.进行数据的删除</h3><blockquote>
<p>在provider中修改delete函数</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">delete</span><span class="params">(Uri uri, String selection, String[] selectionArgs)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//删除多行</span></span><br><span class="line">    <span class="keyword">if</span> (URI_MATCHER.match(uri) == USERS)&#123;</span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> UserinfoDatabase.mhelper.getWritableDatabase();</span><br><span class="line">        count = db.delete(UserinfoDatabase.TABLE_NAME,selection,selectionArgs);</span><br><span class="line">        db.close();</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="comment">//删除单行</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (URI_MATCHER.match(uri) == USER) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> uri.getLastPathSegment();</span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> UserinfoDatabase.mhelper.getWritableDatabase();</span><br><span class="line">        count = db.delete(UserinfoDatabase.TABLE_NAME,<span class="string">&quot;_id=?&quot;</span>,<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;id&#125;);</span><br><span class="line">        db.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用provider</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除多行</span></span><br><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> getContentResolver().delete(UserinfoContent.CONTENT_URI, <span class="string">&quot;name=?&quot;</span>, <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;rc&quot;</span>&#125;);</span><br><span class="line"><span class="keyword">if</span> (count &gt; <span class="number">0</span>)&#123;</span><br><span class="line">    Toastshow.show(<span class="built_in">this</span>,<span class="string">&quot;删除成功&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//删除单行</span></span><br><span class="line"><span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> ContentUris.withAppendedId(UserinfoContent.CONTENT_URI,<span class="number">2</span>); <span class="comment">//在uri后面附加一个/2</span></span><br><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> getContentResolver().delete(uri, <span class="string">&quot;name=?&quot;</span>, <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;rc&quot;</span>&#125;);</span><br><span class="line"><span class="keyword">if</span> (count &gt; <span class="number">0</span>)&#123;</span><br><span class="line">    Toastshow.show(<span class="built_in">this</span>,<span class="string">&quot;删除成功&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在provider中选择路径匹配</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> UriMatcher URI_MATCHER= <span class="keyword">new</span> <span class="title class_">UriMatcher</span>(UriMatcher.NO_MATCH);</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">USERS</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">USER</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">    URI_MATCHER.addURI(UserinfoContent.AUTHORITIES,<span class="string">&quot;/user&quot;</span>,USERS);</span><br><span class="line">    URI_MATCHER.addURI(UserinfoContent.AUTHORITIES,<span class="string">&quot;/user/#&quot;</span>,USER);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="11-运行时动态申请权限"><a href="#11-运行时动态申请权限" class="headerlink" title="11.运行时动态申请权限"></a>11.运行时动态申请权限</h2><blockquote>
<p>提前声明需要的权限</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.READ_CONTACTS&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.WRITE_CONTACTS&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.READ_SMS&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.SEND_SMS&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>1.检查App是否开启了某个权限</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] PERMISSION_CONTACTS = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;</span><br><span class="line">    Manifest.permission.READ_CONTACTS,</span><br><span class="line">    Manifest.permission.WRITE_CONTACTS</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] PERMISSION_SMS = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;</span><br><span class="line">    Manifest.permission.READ_SMS,</span><br><span class="line">    Manifest.permission.SEND_SMS</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">REQUEST_CODE_CONTACTS</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">REQUEST_CODE_SMS</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2.请求系统弹窗，以便用户选择是否开启权限</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">checkPermission</span><span class="params">(Activity act,String[] permissions,<span class="type">int</span> requestCode)</span>&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">check</span> <span class="operator">=</span> PackageManager.PERMISSION_GRANTED;</span><br><span class="line">    <span class="keyword">for</span> (String permission:permissions)&#123;</span><br><span class="line">        check = ContextCompat.checkSelfPermission(act,permission);</span><br><span class="line">        <span class="keyword">if</span> (check != PackageManager.PERMISSION_GRANTED)&#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (check != PackageManager.PERMISSION_GRANTED)&#123;</span><br><span class="line">        ActivityCompat.requestPermissions(act, permissions, requestCode);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.判断用户的权限选择结果</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">checkGrant</span><span class="params">(<span class="type">int</span>[] grantResults)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (grantResults != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> grantResult : grantResults) &#123;</span><br><span class="line">            <span class="keyword">if</span> (grantResult != PackageManager.PERMISSION_GRANTED) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>跳转到setting页面</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">goToSetting</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();</span><br><span class="line">    intent.setAction(Settings.ACTION_APPLICATION_DETAILS_SETTINGS);</span><br><span class="line">    intent.setData(Uri.fromParts(<span class="string">&quot;package&quot;</span>,getPackageName(),<span class="literal">null</span>));</span><br><span class="line">    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class="line">    startActivity(intent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="12-通讯录"><a href="#12-通讯录" class="headerlink" title="12.通讯录"></a>12.通讯录</h2><h3 id="12-1-添加联系人"><a href="#12-1-添加联系人" class="headerlink" title="12.1.添加联系人"></a>12.1.添加联系人</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addContact</span><span class="params">(ContentResolver contentResolver, Contact contact)</span> &#123;</span><br><span class="line">    <span class="type">ContentValues</span> <span class="variable">values</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>();</span><br><span class="line"></span><br><span class="line">    <span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> contentResolver.insert(ContactsContract.RawContacts.CONTENT_URI, values);</span><br><span class="line">    <span class="type">long</span> <span class="variable">rawContentID</span> <span class="operator">=</span> ContentUris.parseId(uri);</span><br><span class="line">    <span class="type">ContentValues</span> <span class="variable">name</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>();</span><br><span class="line">    <span class="comment">//关联联系人编号</span></span><br><span class="line">    name.put(ContactsContract.Data.RAW_CONTACT_ID,rawContentID);</span><br><span class="line">    <span class="comment">//姓名的数据类型</span></span><br><span class="line">    name.put(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE);</span><br><span class="line">    <span class="comment">//添加的类型 1表示家庭 2表示工作</span></span><br><span class="line">    name.put(ContactsContract.Data.DATA2,contact.name);</span><br><span class="line">    <span class="comment">//联系人的姓名</span></span><br><span class="line">    contentResolver.insert(ContactsContract.Data.CONTENT_URI,name);</span><br><span class="line"></span><br><span class="line">    <span class="type">ContentValues</span> <span class="variable">phone</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>();</span><br><span class="line">    <span class="comment">//关联联系人编号</span></span><br><span class="line">    phone.put(ContactsContract.Data.RAW_CONTACT_ID,rawContentID);</span><br><span class="line">    <span class="comment">//姓名的数据类型</span></span><br><span class="line">    phone.put(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE);</span><br><span class="line">    <span class="comment">//添加的类型 1表示家庭 2表示工作</span></span><br><span class="line">    phone.put(ContactsContract.Data.DATA1,contact.phone);</span><br><span class="line">    phone.put(ContactsContract.Data.DATA2,ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE);</span><br><span class="line">    <span class="comment">//联系人的手机号</span></span><br><span class="line">    contentResolver.insert(ContactsContract.Data.CONTENT_URI,phone);</span><br><span class="line"></span><br><span class="line">    <span class="type">ContentValues</span> <span class="variable">email</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>();</span><br><span class="line">    <span class="comment">//关联联系人编号</span></span><br><span class="line">    email.put(ContactsContract.Data.RAW_CONTACT_ID,rawContentID);</span><br><span class="line">    <span class="comment">//姓名的数据类型</span></span><br><span class="line">    email.put(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE);</span><br><span class="line">    <span class="comment">//添加的类型 1表示家庭 2表示工作</span></span><br><span class="line">    email.put(ContactsContract.Data.DATA1,contact.email);</span><br><span class="line">    email.put(ContactsContract.Data.DATA2,ContactsContract.CommonDataKinds.Email.TYPE_WORK);</span><br><span class="line">    <span class="comment">//联系人的手机号</span></span><br><span class="line">    contentResolver.insert(ContactsContract.Data.CONTENT_URI,email);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12-2-批量添加联系人"><a href="#12-2-批量添加联系人" class="headerlink" title="12.2.批量添加联系人"></a>12.2.批量添加联系人</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFullContacts</span><span class="params">(ContentResolver contentResolver, Contact contact)</span>&#123;</span><br><span class="line">    <span class="type">ContentProviderOperation</span> <span class="variable">op_main</span> <span class="operator">=</span> ContentProviderOperation.</span><br><span class="line">        newInsert(ContactsContract.Data.CONTENT_URI).withValue(ContactsContract.RawContacts.ACCOUNT_NAME,<span class="literal">null</span>).</span><br><span class="line">        build();</span><br><span class="line"></span><br><span class="line">    <span class="type">ContentProviderOperation</span> <span class="variable">op_name</span> <span class="operator">=</span> ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI).</span><br><span class="line">        <span class="comment">//将第0个操作的id，即raw_contracts的id作为data表中的raw_contract_id</span></span><br><span class="line">        withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID,<span class="number">0</span>).</span><br><span class="line">        withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE)</span><br><span class="line">        .withValue(ContactsContract.Data.DATA2,contact.name)</span><br><span class="line">        .build();</span><br><span class="line"></span><br><span class="line">    <span class="type">ContentProviderOperation</span> <span class="variable">op_phone</span> <span class="operator">=</span> ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI).</span><br><span class="line">        <span class="comment">//将第0个操作的id，即raw_contracts的id作为data表中的raw_contract_id</span></span><br><span class="line">        withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID,<span class="number">0</span>).</span><br><span class="line">        withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)</span><br><span class="line">        .withValue(ContactsContract.Data.DATA1,contact.phone)</span><br><span class="line">        .withValue(ContactsContract.Data.DATA2,ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE)</span><br><span class="line">        .build();</span><br><span class="line"></span><br><span class="line">    <span class="type">ContentProviderOperation</span> <span class="variable">op_email</span> <span class="operator">=</span> ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI).</span><br><span class="line">        <span class="comment">//将第0个操作的id，即raw_contracts的id作为data表中的raw_contract_id</span></span><br><span class="line">        withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID,<span class="number">0</span>).</span><br><span class="line">        withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE)</span><br><span class="line">        .withValue(ContactsContract.Data.DATA1,contact.email)</span><br><span class="line">        .withValue(ContactsContract.Data.DATA2,ContactsContract.CommonDataKinds.Email.TYPE_WORK)</span><br><span class="line">        .build();</span><br><span class="line"></span><br><span class="line">    ArrayList&lt;ContentProviderOperation&gt; operations = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    operations.add(op_main);</span><br><span class="line">    operations.add(op_name);</span><br><span class="line">    operations.add(op_phone);</span><br><span class="line">    operations.add(op_email);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        contentResolver.applyBatch(ContactsContract.AUTHORITY,operations);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (OperationApplicationException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (RemoteException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12-3-查询联系人"><a href="#12-3-查询联系人" class="headerlink" title="12.3.查询联系人"></a>12.3.查询联系人</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressLint(&quot;Range&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">readPhoneContacts</span><span class="params">(ContentResolver resolver)</span>&#123;</span><br><span class="line">    <span class="type">Cursor</span> <span class="variable">cursor</span> <span class="operator">=</span> resolver.query(ContactsContract.RawContacts.CONTENT_URI, <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;ContactsContract.RawContacts._ID&#125;, <span class="literal">null</span>, <span class="literal">null</span>,<span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">while</span> (cursor.moveToNext())&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">rawContactId</span> <span class="operator">=</span> cursor.getInt(<span class="number">0</span>);</span><br><span class="line">        <span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;content://com.android.contacts/contacts/&quot;</span> + rawContactId + <span class="string">&quot;/dataa&quot;</span>);</span><br><span class="line">        <span class="type">Cursor</span> <span class="variable">query</span> <span class="operator">=</span> resolver.query(uri, <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;ContactsContract.Data.MIMETYPE, ContactsContract.Data.DATA1, ContactsContract.Data.DATA2&#125;, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Contact</span> <span class="variable">contact</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Contact</span>();</span><br><span class="line">        <span class="keyword">while</span> (query.moveToNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">data1</span> <span class="operator">=</span> query.getString(query.getColumnIndex(ContactsContract.Data.DATA1));</span><br><span class="line">            <span class="type">String</span> <span class="variable">mimeType</span> <span class="operator">=</span> query.getString(query.getColumnIndex(ContactsContract.Data.MIMETYPE));</span><br><span class="line">            <span class="comment">//查询姓名</span></span><br><span class="line">            <span class="keyword">if</span> (mimeType.equals(ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE))&#123;</span><br><span class="line">                contact.name = data1;</span><br><span class="line">            &#125;<span class="comment">//查询电话号</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (mimeType.equals(ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE))&#123;</span><br><span class="line">                contact.phone = data1;</span><br><span class="line">            &#125;<span class="comment">//查询邮箱</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (mimeType.equals(ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE))&#123;</span><br><span class="line">                contact.email = data1;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        query.close();</span><br><span class="line">    &#125;</span><br><span class="line">    cursor.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="13-短信"><a href="#13-短信" class="headerlink" title="13.短信"></a>13.短信</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity4</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> SmsGetObserver mObserver;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        EdgeToEdge.enable(<span class="built_in">this</span>);</span><br><span class="line">        setContentView(R.layout.activity_main4);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//给指定的uri注册内容监听器，一旦发生数据变化，就触发观察器的onChange方法</span></span><br><span class="line">        <span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;content://sms&quot;</span>);</span><br><span class="line">        mObserver = <span class="keyword">new</span> <span class="title class_">SmsGetObserver</span>(<span class="built_in">this</span>);</span><br><span class="line">        <span class="comment">//notifyForDescendants为false表示uri的精确匹配，为true表示可以匹配其派生路径</span></span><br><span class="line">        getContentResolver().registerContentObserver(uri,<span class="literal">true</span>,mObserver);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onDestroy();</span><br><span class="line">        getContentResolver().unregisterContentObserver(mObserver);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">SmsGetObserver</span> <span class="keyword">extends</span> <span class="title class_">ContentObserver</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> Context mContext;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">SmsGetObserver</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>(<span class="keyword">new</span> <span class="title class_">Handler</span>(Looper.getMainLooper()));</span><br><span class="line">            <span class="built_in">this</span>.mContext = context;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@SuppressLint(&quot;Range&quot;)</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onChange</span><span class="params">(<span class="type">boolean</span> selfChange, <span class="meta">@Nullable</span> Uri uri)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>.onChange(selfChange, uri);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (uri == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (uri.toString().contains(<span class="string">&quot;content://sms/raw&quot;</span>) || uri.toString().equals(<span class="string">&quot;content://sms&quot;</span>))&#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">Cursor</span> <span class="variable">cursor</span> <span class="operator">=</span> mContext.getContentResolver().query(uri, <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;address&quot;</span>, <span class="string">&quot;body&quot;</span>, <span class="string">&quot;date&quot;</span>&#125;, <span class="literal">null</span>, <span class="literal">null</span>, <span class="string">&quot;date DESC&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (cursor.moveToNext())&#123;</span><br><span class="line">                 <span class="type">String</span> <span class="variable">sender</span> <span class="operator">=</span> cursor.getString(cursor.getColumnIndex(<span class="string">&quot;address&quot;</span>));</span><br><span class="line">                <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> cursor.getString(cursor.getColumnIndex(<span class="string">&quot;body&quot;</span>));</span><br><span class="line"></span><br><span class="line">                Log.d(<span class="string">&quot;mytag&quot;</span>, String.format(<span class="string">&quot;sender:%s,content:%s&quot;</span>,sender,content));</span><br><span class="line">            &#125;</span><br><span class="line">            cursor.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>选择图片并且显示</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity5</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener &#123;</span><br><span class="line">    <span class="keyword">private</span> ImageView view;</span><br><span class="line">    <span class="keyword">private</span>  ActivityResultLauncher&lt;Intent&gt; register;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        EdgeToEdge.enable(<span class="built_in">this</span>);</span><br><span class="line">        setContentView(R.layout.activity_main5);</span><br><span class="line"></span><br><span class="line">        view = findViewById(R.id.e_image);</span><br><span class="line">        view.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//跳转到系统相册，并且返回</span></span><br><span class="line">        register = registerForActivityResult(<span class="keyword">new</span> <span class="title class_">StartActivityForResult</span>(), <span class="keyword">new</span> <span class="title class_">ActivityResultCallback</span>&lt;ActivityResult&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onActivityResult</span><span class="params">(ActivityResult o)</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (o.getResultCode() == RESULT_OK)&#123;</span><br><span class="line">                    <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> o.getData();</span><br><span class="line">                    <span class="comment">//选择图片的路径</span></span><br><span class="line">                    <span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> intent.getData();</span><br><span class="line">                    <span class="keyword">if</span> (uri != <span class="literal">null</span>)&#123;</span><br><span class="line">                        view.setImageURI(uri);</span><br><span class="line">                        Log.d(<span class="string">&quot;mytag&quot;</span>, uri.toString());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (v.getId() == R.id.e_image)&#123;</span><br><span class="line">            <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_GET_CONTENT);</span><br><span class="line"></span><br><span class="line">            intent.setType(<span class="string">&quot;image/*&quot;</span>);</span><br><span class="line">            register.launch(intent);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>跳转到短信，并且发送短信</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity5</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener &#123;</span><br><span class="line">    <span class="keyword">private</span> EditText title;</span><br><span class="line">    <span class="keyword">private</span> EditText phone;</span><br><span class="line">    <span class="keyword">private</span> ImageView view;</span><br><span class="line">    <span class="keyword">private</span> EditText content;</span><br><span class="line">    <span class="keyword">private</span>  ActivityResultLauncher&lt;Intent&gt; register;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Uri uri;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        view = findViewById(R.id.e_image);</span><br><span class="line">        view.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        findViewById(R.id.e_send).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">        phone = findViewById(R.id.e_phone);</span><br><span class="line">        title = findViewById(R.id.e_title);</span><br><span class="line">        content = findViewById(R.id.e_content);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (v.getId() == R.id.e_send) &#123;</span><br><span class="line">            sendMsm(phone.getText().toString(),</span><br><span class="line">                    title.getText().toString(),</span><br><span class="line">                    content.getText().toString());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">sendMsm</span><span class="params">(String phone, String title, String message)</span> &#123;</span><br><span class="line">        <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_SEND);</span><br><span class="line">        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//intent的接收者将被准许读取携带的uri数据</span></span><br><span class="line">        intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);</span><br><span class="line">        intent.putExtra(<span class="string">&quot;address&quot;</span>,phone);</span><br><span class="line">        intent.putExtra(<span class="string">&quot;title&quot;</span>,title);</span><br><span class="line">        intent.putExtra(<span class="string">&quot;sms_body&quot;</span>,message);</span><br><span class="line">        <span class="comment">//图片 文件流</span></span><br><span class="line">        intent.putExtra(Intent.EXTRA_STREAM,uri);</span><br><span class="line">        <span class="comment">//附件的类型</span></span><br><span class="line">        intent.setType(<span class="string">&quot;image/*&quot;</span>);</span><br><span class="line">        <span class="comment">//系统会弹出窗口让你选择</span></span><br><span class="line">        startActivity(intent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>通过MediaStore查询图片</p>
</blockquote>
<blockquote>
<p>PermissionUtil</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PermissionUtil</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">checkPermission</span><span class="params">(Activity act,String[] permissions,<span class="type">int</span> requestCode)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">check</span> <span class="operator">=</span> PackageManager.PERMISSION_GRANTED;</span><br><span class="line">        <span class="keyword">for</span> (String permission:permissions)&#123;</span><br><span class="line">            check = ContextCompat.checkSelfPermission(act,permission);</span><br><span class="line">            <span class="keyword">if</span> (check != PackageManager.PERMISSION_GRANTED)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (check != PackageManager.PERMISSION_GRANTED)&#123;</span><br><span class="line">            ActivityCompat.requestPermissions(act, permissions, requestCode);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">checkGrant</span><span class="params">(<span class="type">int</span>[] grantResults)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (grantResults != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> grantResult : grantResults) &#123;</span><br><span class="line">                <span class="keyword">if</span> (grantResult != PackageManager.PERMISSION_GRANTED) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Activity</p>
</blockquote>
<p><code>权限</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.READ_MEDIA_IMAGES&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity6</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] PERMISSION = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;</span><br><span class="line">            Manifest.permission.READ_MEDIA_IMAGES</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">REQUEST_CODE_ALL</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onRequestPermissionsResult</span><span class="params">(<span class="type">int</span> requestCode, <span class="meta">@NonNull</span> String[] permissions, <span class="meta">@NonNull</span> <span class="type">int</span>[] grantResults)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults);</span><br><span class="line">        <span class="keyword">if</span> (requestCode == REQUEST_CODE_ALL &amp;&amp; PermissionUtil.checkGrant(grantResults))&#123;</span><br><span class="line">            LoadImageList();</span><br><span class="line">            ShowImageGrid();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ArrayList&lt;ImageInfo&gt; mImageInfoList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> GridLayout gl;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        gl = findViewById(R.id.e_grid);</span><br><span class="line">        <span class="comment">//手动让MediaStore扫描入库</span></span><br><span class="line">        MediaScannerConnection.scanFile(<span class="built_in">this</span>,<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;</span><br><span class="line">                Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM).toString()</span><br><span class="line">        &#125;,<span class="literal">null</span>,<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//引发系统弹窗</span></span><br><span class="line">        <span class="keyword">if</span> (PermissionUtil.checkPermission(<span class="built_in">this</span>,PERMISSION,REQUEST_CODE_ALL))&#123;</span><br><span class="line">            LoadImageList();</span><br><span class="line">            ShowImageGrid();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">ShowImageGrid</span><span class="params">()</span>&#123;</span><br><span class="line">        gl.removeAllViews();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (ImageInfo imageInfo:mImageInfoList)&#123;</span><br><span class="line">            <span class="type">ImageView</span> <span class="variable">iv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ImageView</span>(<span class="built_in">this</span>);</span><br><span class="line">            <span class="type">Bitmap</span> <span class="variable">bitmap</span> <span class="operator">=</span> BitmapFactory.decodeFile(imageInfo.getPath());</span><br><span class="line">            iv.setImageBitmap(bitmap);</span><br><span class="line">            iv.setScaleType(ImageView.ScaleType.FIT_CENTER);</span><br><span class="line">            <span class="type">int</span> <span class="variable">px</span> <span class="operator">=</span> diptopx.dip(<span class="built_in">this</span>,<span class="number">110</span>);</span><br><span class="line">            ViewGroup.<span class="type">LayoutParams</span> <span class="variable">layoutParams</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ViewGroup</span>.LayoutParams(px,px);</span><br><span class="line">            iv.setLayoutParams(layoutParams);</span><br><span class="line">            <span class="type">int</span> <span class="variable">padding</span> <span class="operator">=</span> diptopx.dip(<span class="built_in">this</span>,<span class="number">5</span>);</span><br><span class="line">            iv.setPadding(padding,padding,padding,padding);</span><br><span class="line">            iv.setOnClickListener(v-&gt;&#123;</span><br><span class="line"></span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            gl.addView(iv);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressLint(&quot;Range&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">LoadImageList</span><span class="params">()</span> &#123;</span><br><span class="line">        String[] column = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;</span><br><span class="line">                MediaStore.Images.Media._ID,</span><br><span class="line">                MediaStore.Images.Media.TITLE,</span><br><span class="line">                MediaStore.Images.Media.SIZE,</span><br><span class="line">                MediaStore.Images.Media.DATA,</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="type">Cursor</span> <span class="variable">cursor</span> <span class="operator">=</span> getContentResolver().query(</span><br><span class="line">                MediaStore.Images.Media.EXTERNAL_CONTENT_URI,</span><br><span class="line">                column,</span><br><span class="line">                <span class="string">&quot;_size &lt; 307200&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;_size DESC&quot;</span></span><br><span class="line">        );</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (cursor.moveToNext() &amp;&amp; count &lt; <span class="number">6</span>)&#123;</span><br><span class="line">            <span class="type">long</span> <span class="variable">id</span> <span class="operator">=</span> cursor.getLong(cursor.getColumnIndex(MediaStore.Images.Media._ID));</span><br><span class="line">            <span class="type">String</span> <span class="variable">title</span> <span class="operator">=</span> cursor.getString(cursor.getColumnIndex(MediaStore.Images.Media.TITLE));</span><br><span class="line">            <span class="type">long</span> <span class="variable">size</span> <span class="operator">=</span> cursor.getLong(cursor.getColumnIndex(MediaStore.Images.Media.SIZE));</span><br><span class="line">            <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> cursor.getString(cursor.getColumnIndex(MediaStore.Images.Media.DATA));</span><br><span class="line"></span><br><span class="line">            <span class="type">ImageInfo</span> <span class="variable">imageInfo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ImageInfo</span>(id, title, size, path);</span><br><span class="line">            count++;</span><br><span class="line">            mImageInfoList.add(imageInfo);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="14FileProvider"><a href="#14FileProvider" class="headerlink" title="14FileProvider"></a>14FileProvider</h2><blockquote>
<p>权限</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">provider</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:authorities</span>=<span class="string">&quot;@string/file_provider&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:name</span>=<span class="string">&quot;androidx.core.content.FileProvider&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:exported</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:grantUriPermissions</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.support.FILE_PROVIDER_PATHS&quot;</span> <span class="attr">android:resource</span>=<span class="string">&quot;@xml/file_paths&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">provider</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>xml&#x2F;file_paths.xml</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">paths</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">external-path</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">&quot;external_storage_pictures&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">path</span>=<span class="string">&quot;DCIM/Camera&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">external-path</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">&quot;external_storage_pictures&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">path</span>=<span class="string">&quot;Pictures&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">paths</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>检测文件是否是指定fileProvider路径下的</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">CheckFileUri</span><span class="params">(Context ctx,String path)</span>&#123;</span><br><span class="line">    <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path);</span><br><span class="line">    <span class="keyword">if</span> (!file.exists() || !file.isFile() || file.length() &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N)&#123;</span><br><span class="line">            <span class="comment">//通过FileProvider获得文件路径</span></span><br><span class="line">            FileProvider.getUriForFile(ctx,ctx.getString(R.string.file_provider),file);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="15-安装应用"><a href="#15-安装应用" class="headerlink" title="15.安装应用"></a>15.安装应用</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity7</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//兼容安卓11之前的版本</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] PERMISSION = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;</span><br><span class="line">            Manifest.permission.READ_MEDIA_IMAGES</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">REQUEST_CODE_ALL</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        findViewById(R.id.down).setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(v.getId() == R.id.down)&#123;</span><br><span class="line">            <span class="comment">//版本兼容</span></span><br><span class="line">            <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) &#123;</span><br><span class="line">                CheckAndinstallApk();</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (PermissionUtil.checkPermission(<span class="built_in">this</span>,PERMISSION,REQUEST_CODE_ALL))&#123;</span><br><span class="line">                    installApk();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onRequestPermissionsResult</span><span class="params">(<span class="type">int</span> requestCode, <span class="meta">@NonNull</span> String[] permissions, <span class="meta">@NonNull</span> <span class="type">int</span>[] grantResults)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults);</span><br><span class="line">        <span class="keyword">if</span> (requestCode == REQUEST_CODE_ALL &amp;&amp; PermissionUtil.checkGrant(grantResults))&#123;</span><br><span class="line">            installApk();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">CheckAndinstallApk</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//检查是否有MANAGE_EXTERNAL_STORAGE权限，没有则跳转到设置页面</span></span><br><span class="line">        <span class="keyword">if</span> (!Environment.isExternalStorageEmulated())&#123;</span><br><span class="line">            <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Settings.ACTION_MANAGE_ALL_FILES_ACCESS_PERMISSION);</span><br><span class="line">            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class="line">            intent.setData(Uri.fromParts(<span class="string">&quot;package&quot;</span>,getPackageName(),<span class="literal">null</span>));</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            installApk();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">installApk</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">apkPath</span> <span class="operator">=</span> Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).toString() + <span class="string">&quot;/.apk&quot;</span>;</span><br><span class="line">        Log.d(<span class="string">&quot;mytag&quot;</span>, <span class="string">&quot;apkPath&quot;</span>+apkPath);</span><br><span class="line">        <span class="type">PackageManager</span> <span class="variable">pm</span> <span class="operator">=</span> getPackageManager();</span><br><span class="line">        PackageInfo pi;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            pi = pm.getPackageInfo(apkPath, PackageManager.GET_ACTIVITIES);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (PackageManager.NameNotFoundException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (pi == <span class="literal">null</span>)&#123;</span><br><span class="line">            Toastshow.show(<span class="built_in">this</span>,<span class="string">&quot;文件已损坏&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(apkPath);</span><br><span class="line"></span><br><span class="line">        uri = FileProvider.getUriForFile(<span class="built_in">this</span>,getString(R.string.file_provider),<span class="keyword">new</span> <span class="title class_">File</span>(apkPath));</span><br><span class="line">        <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_VIEW);</span><br><span class="line">        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class="line">        intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);</span><br><span class="line">        <span class="comment">//设置uri的类型为apk文件</span></span><br><span class="line">        intent.setDataAndType(uri,<span class="string">&quot;application/vnd.android.package-archive&quot;</span>);</span><br><span class="line">        <span class="comment">//启动</span></span><br><span class="line">        startActivity(intent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>需要的权限</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.REQUEST_INSTALL_PACKAGES&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="16-高级控件"><a href="#16-高级控件" class="headerlink" title="16.高级控件"></a>16.高级控件</h2><h3 id="16-1-Spinner"><a href="#16-1-Spinner" class="headerlink" title="16.1.Spinner"></a>16.1.Spinner</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Spinner</span></span></span><br><span class="line"><span class="tag">         <span class="attr">android:id</span>=<span class="string">&quot;@+id/drop_down&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">android:spinnerMode</span>=<span class="string">&quot;dropdown&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Spinner sp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String[] startArray = &#123;<span class="string">&quot;水星&quot;</span>,<span class="string">&quot;火星&quot;</span>,<span class="string">&quot;金星&quot;</span>,<span class="string">&quot;木星&quot;</span>,<span class="string">&quot;木星&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SuppressLint(&quot;ResourceType&quot;)</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    EdgeToEdge.enable(<span class="built_in">this</span>);</span><br><span class="line">    setContentView(R.layout.activity_test);</span><br><span class="line"></span><br><span class="line">    sp = findViewById(R.id.drop_down);</span><br><span class="line">    sp.setAdapter(<span class="keyword">new</span> <span class="title class_">ArrayAdapter</span>&lt;String&gt;(<span class="built_in">this</span>,R.id.drop_down,startArray));</span><br><span class="line">    <span class="comment">//默认选择第一项</span></span><br><span class="line">    sp.setSelection(<span class="number">0</span>);</span><br><span class="line">    sp.setOnItemClickListener(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(AdapterView&lt;?&gt; parent, View view, <span class="type">int</span> position, <span class="type">long</span> id)</span> &#123;</span><br><span class="line">    Toastshow.show(<span class="built_in">this</span>,<span class="string">&quot;选择&quot;</span>+startArray[position]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="16-2-SimpleAdapter"><a href="#16-2-SimpleAdapter" class="headerlink" title="16.2.SimpleAdapter"></a>16.2.SimpleAdapter</h3><blockquote>
<p>构建每一个条目的基本构造</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">&quot;@drawable/na&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_im&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;50dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:scaleType</span>=<span class="string">&quot;centerCrop&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_name&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;图1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;10sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_weight</span>=<span class="string">&quot;3&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#ff0000&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>基本代码逻辑</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">int</span>[] iconArray = &#123;R.drawable.na,R.drawable.na,R.drawable.na,R.drawable.na,R.drawable.na&#125;;</span><br><span class="line"><span class="keyword">private</span> String[] nameArray = &#123;<span class="string">&quot;图一&quot;</span>,<span class="string">&quot;图二&quot;</span>,<span class="string">&quot;图三&quot;</span>,<span class="string">&quot;图四&quot;</span>,<span class="string">&quot;图五&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    EdgeToEdge.enable(<span class="built_in">this</span>);</span><br><span class="line">    setContentView(R.layout.activity_main2);</span><br><span class="line"></span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;iconArray.length;i++)&#123;</span><br><span class="line">        Map&lt;String,Object&gt; item = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        item.put(<span class="string">&quot;name&quot;</span>,nameArray[i]);</span><br><span class="line">        item.put(<span class="string">&quot;icon&quot;</span>,iconArray[i]);</span><br><span class="line">        list.add(item);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">SimpleAdapter</span> <span class="variable">startAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleAdapter</span>(<span class="built_in">this</span>,list,R.layout.item_simple,</span><br><span class="line">                                                   <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;name&quot;</span>,<span class="string">&quot;icon&quot;</span>&#125;,<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;R.id.tv_name,R.id.tv_im&#125;);</span><br><span class="line">    <span class="type">Spinner</span> <span class="variable">sp_icon</span> <span class="operator">=</span> findViewById(R.id.tv_sp);</span><br><span class="line">    sp_icon.setAdapter(startAdapter);</span><br><span class="line">    sp_icon.setSelection(<span class="number">0</span>);</span><br><span class="line">    sp_icon.setOnItemSelectedListener(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="16-3BaseAdapter"><a href="#16-3BaseAdapter" class="headerlink" title="16.3BaseAdapter"></a>16.3BaseAdapter</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdapter</span> <span class="keyword">extends</span> <span class="title class_">BaseAdapter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] imageArr;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String[] nameArr;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> Context mContext;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyAdapter</span><span class="params">(Context context,<span class="type">int</span>[] imageArr,String[] nameArr)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.mContext = context;</span><br><span class="line">        <span class="built_in">this</span>.imageArr = imageArr;</span><br><span class="line">        <span class="built_in">this</span>.nameArr = nameArr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> imageArr.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getItem</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> imageArr[position];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getItemId</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> position;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">getView</span><span class="params">(<span class="type">int</span> position, View convertView, ViewGroup parent)</span> &#123;</span><br><span class="line">        <span class="type">View</span> <span class="variable">view</span> <span class="operator">=</span> LayoutInflater.from(mContext).inflate(R.layout.item_list, <span class="literal">null</span>);</span><br><span class="line">        <span class="type">ImageView</span> <span class="variable">image</span> <span class="operator">=</span> view.findViewById(R.id.ts_im);</span><br><span class="line">        <span class="type">TextView</span> <span class="variable">maintext</span> <span class="operator">=</span> view.findViewById(R.id.ts_name);</span><br><span class="line">        <span class="type">TextView</span> <span class="variable">childtext</span> <span class="operator">=</span> view.findViewById(R.id.ts_chd);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> nameArr[position];</span><br><span class="line">        <span class="type">int</span> <span class="variable">imgsrc</span> <span class="operator">=</span> imageArr[position];</span><br><span class="line"></span><br><span class="line">        image.setImageResource(imgsrc);</span><br><span class="line">        maintext.setText(name);</span><br><span class="line">        childtext.setText(name+<span class="string">&quot;id&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>使用</code></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">lv =  findViewById(R.id.ts_lv);</span><br><span class="line"></span><br><span class="line"><span class="type">MyAdapter</span> <span class="variable">startAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyAdapter</span>(<span class="built_in">this</span>,iconArray,nameArray);</span><br><span class="line"></span><br><span class="line">lv.setAdapter(startAdapter);</span><br><span class="line">lv.setSelection(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>进行优化</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdapter</span> <span class="keyword">extends</span> <span class="title class_">BaseAdapter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] imageArr;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String[] nameArr;</span><br><span class="line">    <span class="keyword">private</span> Context mContext;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyAdapter</span><span class="params">(Context context,<span class="type">int</span>[] imageArr,String[] nameArr)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.mContext = context;</span><br><span class="line">        <span class="built_in">this</span>.imageArr = imageArr;</span><br><span class="line">        <span class="built_in">this</span>.nameArr = nameArr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> imageArr.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getItem</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> imageArr[position];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getItemId</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> position;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">getView</span><span class="params">(<span class="type">int</span> position, View convertView, ViewGroup parent)</span> &#123;</span><br><span class="line">        <span class="type">ViewHolder</span> <span class="variable">holder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ViewHolder</span>();</span><br><span class="line">        <span class="keyword">if</span> (convertView == <span class="literal">null</span>) &#123;</span><br><span class="line">            convertView = LayoutInflater.from(mContext).inflate(R.layout.item_list, <span class="literal">null</span>);</span><br><span class="line">            holder.iv_icon = convertView.findViewById(R.id.ts_im);</span><br><span class="line">            holder.tv_name = convertView.findViewById(R.id.ts_name);</span><br><span class="line">            holder.tv_child  = convertView.findViewById(R.id.ts_chd);</span><br><span class="line">            <span class="comment">//将视图持有者保存到转换视图中</span></span><br><span class="line">            convertView.setTag(holder);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            holder = (ViewHolder)convertView.getTag();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> nameArr[position];</span><br><span class="line">        <span class="type">int</span> <span class="variable">imgsrc</span> <span class="operator">=</span> imageArr[position];</span><br><span class="line"></span><br><span class="line">        holder.iv_icon.setImageResource(imgsrc);</span><br><span class="line">        holder.tv_name.setText(name);</span><br><span class="line">        holder.tv_child.setText(name+<span class="string">&quot;id&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> convertView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">ViewHolder</span>&#123;</span><br><span class="line">        <span class="keyword">public</span> ImageView iv_icon;</span><br><span class="line">        <span class="keyword">public</span> TextView tv_name;</span><br><span class="line">        <span class="keyword">public</span> TextView tv_child;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="16-4-ListView"><a href="#16-4-ListView" class="headerlink" title="16.4.ListView"></a>16.4.ListView</h3><blockquote>
<p>基本使用</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">int</span>[] iconArray = &#123;R.drawable.na,R.drawable.na,R.drawable.na,R.drawable.na,R.drawable.na&#125;;</span><br><span class="line"><span class="keyword">private</span> String[] nameArray = &#123;<span class="string">&quot;图一&quot;</span>,<span class="string">&quot;图二&quot;</span>,<span class="string">&quot;图三&quot;</span>,<span class="string">&quot;图四&quot;</span>,<span class="string">&quot;图五&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">    <span class="type">ListView</span> <span class="variable">listView</span> <span class="operator">=</span>  findViewById(R.id.tv_lv);</span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;iconArray.length;i++)&#123;</span><br><span class="line">        Map&lt;String,Object&gt; item = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        item.put(<span class="string">&quot;name&quot;</span>,nameArray[i]);</span><br><span class="line">        item.put(<span class="string">&quot;icon&quot;</span>,iconArray[i]);</span><br><span class="line">        list.add(item);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">SimpleAdapter</span> <span class="variable">startAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleAdapter</span>(<span class="built_in">this</span>,list,R.layout.item_simple,</span><br><span class="line">                                                   <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;name&quot;</span>,<span class="string">&quot;icon&quot;</span>&#125;,<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;R.id.tv_name,R.id.tv_im&#125;);</span><br><span class="line"></span><br><span class="line">    listView.setAdapter(startAdapter);</span><br><span class="line">    listView.setOnItemClickListener(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(AdapterView&lt;?&gt; parent, View view, <span class="type">int</span> position, <span class="type">long</span> id)</span> &#123;</span><br><span class="line">    Toastshow.show(<span class="built_in">this</span>,<span class="string">&quot;点击了&quot;</span>+nameArray[position]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>更改样式</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ListView</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_lv&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:divider</span>=<span class="string">&quot;@null&quot;</span>   </span></span><br><span class="line"><span class="tag">          <span class="attr">android:dividerHeight</span>=<span class="string">&quot;0dp&quot;</span>  </span></span><br><span class="line"><span class="tag">          <span class="attr">android:listSelector</span>=<span class="string">&quot;@color/transparent&quot;</span> </span></span><br><span class="line"><span class="tag">          /&gt;</span> <span class="comment">&lt;!-- //dividerHeight=&quot;0dp&quot;:分割线高度为0 listSelector=&quot;@color/transparent&quot;:分割线颜色为透明--&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (v.getId() == R.id.cb_bg)&#123;</span><br><span class="line">        <span class="keyword">if</span> (ck_bg.isChecked())&#123;</span><br><span class="line">            listView.setSelector(R.drawable.listselector);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            listView.setSelector(R.drawable.ic_launcher_foreground);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (v.getId() == R.id.cb_fg)&#123;</span><br><span class="line">        <span class="keyword">if</span> (ck_fg.isChecked())&#123;</span><br><span class="line">            <span class="type">Drawable</span> <span class="variable">drawable</span> <span class="operator">=</span> getResources().getDrawable(R.color.black,getTheme());</span><br><span class="line">            listView.setDivider(drawable);</span><br><span class="line">            listView.setDividerHeight(diptopx.dip(<span class="built_in">this</span>,<span class="number">1</span>));</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            listView.setDivider(<span class="literal">null</span>);</span><br><span class="line">            listView.setDividerHeight(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>解决条目时间冲突问题</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:descendantFocusability</span>=<span class="string">&quot;blocksDescendants&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--阻止下级控件获取焦点，避免堵塞--&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用代码控制</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdapter</span> <span class="keyword">extends</span> <span class="title class_">BaseAdapter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] imageArr;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String[] nameArr;</span><br><span class="line">    <span class="keyword">private</span> Context mContext;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyAdapter</span><span class="params">(Context context, <span class="type">int</span>[] imageArr, String[] nameArr)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.mContext = context;</span><br><span class="line">        <span class="built_in">this</span>.imageArr = imageArr;</span><br><span class="line">        <span class="built_in">this</span>.nameArr = nameArr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> imageArr.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getItem</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> imageArr[position];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getItemId</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> position;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">getView</span><span class="params">(<span class="type">int</span> position, View convertView, ViewGroup parent)</span> &#123;</span><br><span class="line">        <span class="type">ViewHolder</span> <span class="variable">holder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ViewHolder</span>();</span><br><span class="line">        <span class="keyword">if</span> (convertView == <span class="literal">null</span>) &#123;</span><br><span class="line">            convertView = LayoutInflater.from(mContext).inflate(R.layout.item_list_withbutton, <span class="literal">null</span>);</span><br><span class="line">            holder.tv_ll = convertView.findViewById(R.id.ll_ts);</span><br><span class="line">            holder.iv_icon = convertView.findViewById(R.id.ts_im);</span><br><span class="line">            holder.tv_name = convertView.findViewById(R.id.ts_name);</span><br><span class="line">            holder.tv_child  = convertView.findViewById(R.id.ts_chd);</span><br><span class="line">            holder.ts_bt = convertView.findViewById(R.id.ts_bt);</span><br><span class="line">            <span class="comment">//将视图持有者保存到转换视图中</span></span><br><span class="line">            convertView.setTag(holder);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            holder = (ViewHolder)convertView.getTag();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> nameArr[position];</span><br><span class="line">        <span class="type">int</span> <span class="variable">imgsrc</span> <span class="operator">=</span> imageArr[position];</span><br><span class="line"></span><br><span class="line">        holder.iv_icon.setImageResource(imgsrc);</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        holder.tv_ll.setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS); <span class="comment">//重点</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        holder.tv_name.setText(name);</span><br><span class="line">        holder.tv_child.setText(name+<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        holder.ts_bt.setOnClickListener((v)-&gt;&#123;</span><br><span class="line">            Toast.makeText(mContext,name,Toast.LENGTH_SHORT).show();</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> convertView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">ViewHolder</span>&#123;</span><br><span class="line">        <span class="keyword">public</span> LinearLayout tv_ll;</span><br><span class="line">        <span class="keyword">public</span> ImageView iv_icon;</span><br><span class="line">        <span class="keyword">public</span> TextView tv_name;</span><br><span class="line">        <span class="keyword">public</span> TextView tv_child;</span><br><span class="line">        <span class="keyword">public</span> Button ts_bt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="16-5GridView"><a href="#16-5GridView" class="headerlink" title="16.5GridView"></a>16.5GridView</h3><blockquote>
<p>更改样式</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">GridView</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:id</span>=<span class="string">&quot;@+id/gv&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:numColumns</span>=<span class="string">&quot;2&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">GridView</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:id</span>=<span class="string">&quot;@+id/gv&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:numColumns</span>=<span class="string">&quot;2&quot;</span>     </span></span><br><span class="line"><span class="tag">          <span class="attr">android:verticalSpacing</span>=<span class="string">&quot;3dp&quot;</span>     //<span class="attr">垂直间距为3dp</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:background</span>=<span class="string">&quot;#ff00ff&quot;</span>   </span></span><br><span class="line"><span class="tag">          <span class="attr">android:columnWidth</span>=<span class="string">&quot;100dp&quot;</span>       //<span class="attr">列宽为100dp</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:stretchMode</span>=<span class="string">&quot;none&quot;</span>        //<span class="attr">拉伸模式</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用代码控制</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyPAdapter</span> <span class="keyword">extends</span> <span class="title class_">BaseAdapter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] imageArr;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String[] nameArr;</span><br><span class="line">    <span class="keyword">private</span> Context mContext;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyPAdapter</span><span class="params">(Context context, <span class="type">int</span>[] imageArr, String[] nameArr)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.mContext = context;</span><br><span class="line">        <span class="built_in">this</span>.imageArr = imageArr;</span><br><span class="line">        <span class="built_in">this</span>.nameArr = nameArr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> imageArr.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getItem</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> imageArr[position];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getItemId</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> position;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">getView</span><span class="params">(<span class="type">int</span> position, View convertView, ViewGroup parent)</span> &#123;</span><br><span class="line">        <span class="type">ViewHolder</span> <span class="variable">holder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ViewHolder</span>();</span><br><span class="line">        <span class="keyword">if</span> (convertView == <span class="literal">null</span>) &#123;</span><br><span class="line">            convertView = LayoutInflater.from(mContext).inflate(R.layout.grid_list, <span class="literal">null</span>);</span><br><span class="line">            holder.iv_icon = convertView.findViewById(R.id.ts_im);</span><br><span class="line">            holder.tv_name = convertView.findViewById(R.id.ts_name);</span><br><span class="line">            holder.tv_child  = convertView.findViewById(R.id.ts_chd);</span><br><span class="line">            <span class="comment">//将视图持有者保存到转换视图中</span></span><br><span class="line">            convertView.setTag(holder);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            holder = (ViewHolder)convertView.getTag();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> nameArr[position];</span><br><span class="line">        <span class="type">int</span> <span class="variable">imgsrc</span> <span class="operator">=</span> imageArr[position];</span><br><span class="line"></span><br><span class="line">        holder.iv_icon.setImageResource(imgsrc);</span><br><span class="line">        holder.tv_name.setText(name);</span><br><span class="line">        holder.tv_child.setText(name+<span class="string">&quot;id&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> convertView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">ViewHolder</span>&#123;</span><br><span class="line">        <span class="keyword">public</span> ImageView iv_icon;</span><br><span class="line">        <span class="keyword">public</span> TextView tv_name;</span><br><span class="line">        <span class="keyword">public</span> TextView tv_child;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>




















        </article>
        <section class="post-near">
            <ul>
                
                    <li>上一篇: <a href="/2025/02/22/%E8%A7%A3%E5%86%B3Nginx%E7%AB%AF%E5%8F%A3%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E9%97%AE%E9%A2%98/">解决Nginx端口无法访问问题</a></li>
                
                
                    <li>下一篇: <a href="/2024/12/02/Kotlin/">Kotlin</a></li>
                
            </ul>
        </section>
        
            <section class="post-tags">
            <a class="-none-link" href="/tags/Android/" rel="tag">Android</a><a class="-none-link" href="/tags/Java/" rel="tag">Java</a>
            </section>
        
    
        <section class="post-author">
        
            <figure class="author-avatar">
                <img src="https://p1.meituan.net/csc/949ad40707d4b4bab7e2ebafbd649aa8211830.jpg" alt="日初" />
            </figure>
        
            <div class="author-info">
                <h4>日初</h4>
                <p>一个什么都学的建模动画编程爱好者</p>
            </div>
        </section>
    
    </div>
</main>

    <footer>
    <div class="buttons">
        <a class="to-top" href="#"></a>
    </div>
    <div class="wrap min">
        <section class="widget">
            <div class="row">
                <div class="col-m-4">
                    <h3 class="title-recent">最新文章：</h3>
                    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2025/03/18/Compose%20Jetpack/">Jetpack Compose</a></li><li class="post-list-item"><a class="post-list-link" href="/2025/03/15/AJAX/">AJAX</a></li><li class="post-list-item"><a class="post-list-link" href="/2025/02/23/QT/">QT</a></li><li class="post-list-item"><a class="post-list-link" href="/2025/02/22/%E8%A7%A3%E5%86%B3Nginx%E7%AB%AF%E5%8F%A3%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E9%97%AE%E9%A2%98/">解决Nginx端口无法访问问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2025/01/05/Andriod/">Android</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/12/02/Kotlin/">Kotlin</a></li></ul>
                </div>
                <div class="col-m-4">
                    <h3 class="title-date">时光机：</h3>
                    <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">三月 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/02/">二月 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/01/">一月 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">十二月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/11/">十一月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">十月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">九月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">八月 2024</a></li></ul>
                </div>
                <div class="col-m-4">
                    <h3 class="title-tags">标签云：</h3>
                    <a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/CSS/" style="font-size: 20px;">CSS</a> <a href="/tags/Docker/" style="font-size: 20px;">Docker</a> <a href="/tags/Flutter/" style="font-size: 20px;">Flutter</a> <a href="/tags/Game/" style="font-size: 20px;">Game</a> <a href="/tags/Go/" style="font-size: 20px;">Go</a> <a href="/tags/Go-Web/" style="font-size: 20px;">Go Web</a> <a href="/tags/JS/" style="font-size: 20px;">JS</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Java-Web/" style="font-size: 20px;">Java Web</a> <a href="/tags/Kotlin/" style="font-size: 20px;">Kotlin</a> <a href="/tags/Linux/" style="font-size: 20px;">Linux</a> <a href="/tags/MySql/" style="font-size: 20px;">MySql</a> <a href="/tags/MybatisPlus/" style="font-size: 20px;">MybatisPlus</a> <a href="/tags/Nginx/" style="font-size: 20px;">Nginx</a> <a href="/tags/NodeJs/" style="font-size: 20px;">NodeJs</a> <a href="/tags/QT/" style="font-size: 20px;">QT</a> <a href="/tags/React/" style="font-size: 20px;">React</a> <a href="/tags/Spring-Cloud/" style="font-size: 20px;">Spring Cloud</a> <a href="/tags/UniApp/" style="font-size: 20px;">UniApp</a> <a href="/tags/Unity/" style="font-size: 20px;">Unity</a> <a href="/tags/Vue/" style="font-size: 20px;">Vue</a> <a href="/tags/Webpack/" style="font-size: 20px;">Webpack</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 20px;">前端</a> <a href="/tags/%E8%BF%90%E7%BB%B4/" style="font-size: 20px;">运维</a>
                </div>
            </div>
        </section>
        <section class="sub-footer">
            <p>© 2025 <a href="/">Richu</a>. All Rights Reserved. Theme By <a href="https://github.com/Dreamer-Paul/Hingle" target="_blank" rel="nofollow">Hingle</a>.</p>
        </section>
    </div>
</footer>


<script src="/static/kico.js"></script>
<script src="/static/hingle.js"></script>


<script>var hingle = new Paul_Hingle({"copyright":true,"night":false});</script>

  </body>
</html>
